(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vo(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const re={},Jt=[],Ne=()=>{},Js=()=>!1,wn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Co=t=>t.startsWith("onUpdate:"),Se=Object.assign,Eo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},pl=Object.prototype.hasOwnProperty,Z=(t,e)=>pl.call(t,e),B=Array.isArray,$t=t=>xn(t)==="[object Map]",hl=t=>xn(t)==="[object Set]",O=t=>typeof t=="function",ce=t=>typeof t=="string",Dt=t=>typeof t=="symbol",de=t=>t!==null&&typeof t=="object",$s=t=>(de(t)||O(t))&&O(t.then)&&O(t.catch),ml=Object.prototype.toString,xn=t=>ml.call(t),gl=t=>xn(t).slice(8,-1),yl=t=>xn(t)==="[object Object]",So=t=>ce(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ot=vo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nn=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},_l=/-\w/g,lt=Nn(t=>t.replace(_l,e=>e.slice(1).toUpperCase())),Tl=/\B([A-Z])/g,Tt=Nn(t=>t.replace(Tl,"-$1").toLowerCase()),Os=Nn(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hn=Nn(t=>t?`on${Os(t)}`:""),rt=(t,e)=>!Object.is(t,e),Bn=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},vn=(t,e,n,o=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:o,value:n})},vl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Qo;const pt=()=>Qo||(Qo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Io(t){if(B(t)){const e={};for(let n=0;n<t.length;n++){const o=t[n],i=ce(o)?Il(o):Io(o);if(i)for(const s in i)e[s]=i[s]}return e}else if(ce(t)||de(t))return t}const Cl=/;(?![^(]*\))/g,El=/:([^]+)/,Sl=/\/\*[^]*?\*\//g;function Il(t){const e={};return t.replace(Sl,"").split(Cl).forEach(n=>{if(n){const o=n.split(El);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function Ao(t){let e="";if(ce(t))e=t;else if(B(t))for(let n=0;n<t.length;n++){const o=Ao(t[n]);o&&(e+=o+" ")}else if(de(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Al="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pl=vo(Al);function Ks(t){return!!t||t===""}/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pe;class Rl{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pe,!e&&Pe&&(this.index=(Pe.scopes||(Pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Pe;try{return Pe=this,e()}finally{Pe=n}}}on(){++this._on===1&&(this.prevScope=Pe,Pe=this)}off(){this._on>0&&--this._on===0&&(Pe=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Ml(){return Pe}let se;const Jn=new WeakSet;class Ws{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pe&&Pe.active&&Pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jn.has(this)&&(Jn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zs(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zo(this),Xs(this);const e=se,n=De;se=this,De=!0;try{return this.fn()}finally{Qs(this),se=e,De=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Mo(e);this.deps=this.depsTail=void 0,Zo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qn(this)&&this.run()}get dirty(){return Qn(this)}}let Ys=0,Kt,Wt;function zs(t,e=!1){if(t.flags|=8,e){t.next=Wt,Wt=t;return}t.next=Kt,Kt=t}function Po(){Ys++}function Ro(){if(--Ys>0)return;if(Wt){let e=Wt;for(Wt=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Kt;){let e=Kt;for(Kt=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(o){t||(t=o)}e=n}}if(t)throw t}function Xs(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Qs(t){let e,n=t.depsTail,o=n;for(;o;){const i=o.prevDep;o.version===-1?(o===n&&(n=i),Mo(o),wl(o)):e=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=i}t.deps=e,t.depsTail=n}function Qn(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Zs(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Zs(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===jt)||(t.globalVersion=jt,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Qn(t))))return;t.flags|=2;const e=t.dep,n=se,o=De;se=t,De=!0;try{Xs(t);const i=t.fn(t._value);(e.version===0||rt(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{se=n,De=o,Qs(t),t.flags&=-3}}function Mo(t,e=!1){const{dep:n,prevSub:o,nextSub:i}=t;if(o&&(o.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=o,t.nextSub=void 0),n.subs===t&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Mo(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function wl(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let De=!0;const js=[];function Xe(){js.push(De),De=!1}function Qe(){const t=js.pop();De=t===void 0?!0:t}function Zo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=se;se=void 0;try{e()}finally{se=n}}}let jt=0;class xl{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!se||!De||se===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==se)n=this.activeLink=new xl(se,this),se.deps?(n.prevDep=se.depsTail,se.depsTail.nextDep=n,se.depsTail=n):se.deps=se.depsTail=n,er(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=se.depsTail,n.nextDep=void 0,se.depsTail.nextDep=n,se.depsTail=n,se.deps===n&&(se.deps=o)}return n}trigger(e){this.version++,jt++,this.notify(e)}notify(e){Po();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ro()}}}function er(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let o=e.deps;o;o=o.nextDep)er(o)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Zn=new WeakMap,ht=Symbol(""),jn=Symbol(""),en=Symbol("");function me(t,e,n){if(De&&se){let o=Zn.get(t);o||Zn.set(t,o=new Map);let i=o.get(n);i||(o.set(n,i=new wo),i.map=o,i.key=n),i.track()}}function ze(t,e,n,o,i,s){const a=Zn.get(t);if(!a){jt++;return}const u=f=>{f&&f.trigger()};if(Po(),e==="clear")a.forEach(u);else{const f=B(t),d=f&&So(n);if(f&&n==="length"){const c=Number(o);a.forEach((p,h)=>{(h==="length"||h===en||!Dt(h)&&h>=c)&&u(p)})}else switch((n!==void 0||a.has(void 0))&&u(a.get(n)),d&&u(a.get(en)),e){case"add":f?d&&u(a.get("length")):(u(a.get(ht)),$t(t)&&u(a.get(jn)));break;case"delete":f||(u(a.get(ht)),$t(t)&&u(a.get(jn)));break;case"set":$t(t)&&u(a.get(ht));break}}Ro()}function Et(t){const e=Q(t);return e===t?e:(me(e,"iterate",en),be(t)?e:e.map(ve))}function xo(t){return me(t=Q(t),"iterate",en),t}const Nl={__proto__:null,[Symbol.iterator](){return $n(this,Symbol.iterator,ve)},concat(...t){return Et(this).concat(...t.map(e=>B(e)?Et(e):e))},entries(){return $n(this,"entries",t=>(t[1]=ve(t[1]),t))},every(t,e){return We(this,"every",t,e,void 0,arguments)},filter(t,e){return We(this,"filter",t,e,n=>n.map(ve),arguments)},find(t,e){return We(this,"find",t,e,ve,arguments)},findIndex(t,e){return We(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return We(this,"findLast",t,e,ve,arguments)},findLastIndex(t,e){return We(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return We(this,"forEach",t,e,void 0,arguments)},includes(...t){return On(this,"includes",t)},indexOf(...t){return On(this,"indexOf",t)},join(t){return Et(this).join(t)},lastIndexOf(...t){return On(this,"lastIndexOf",t)},map(t,e){return We(this,"map",t,e,void 0,arguments)},pop(){return Vt(this,"pop")},push(...t){return Vt(this,"push",t)},reduce(t,...e){return jo(this,"reduce",t,e)},reduceRight(t,...e){return jo(this,"reduceRight",t,e)},shift(){return Vt(this,"shift")},some(t,e){return We(this,"some",t,e,void 0,arguments)},splice(...t){return Vt(this,"splice",t)},toReversed(){return Et(this).toReversed()},toSorted(t){return Et(this).toSorted(t)},toSpliced(...t){return Et(this).toSpliced(...t)},unshift(...t){return Vt(this,"unshift",t)},values(){return $n(this,"values",ve)}};function $n(t,e,n){const o=xo(t),i=o[e]();return o!==t&&!be(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const Dl=Array.prototype;function We(t,e,n,o,i,s){const a=xo(t),u=a!==t&&!be(t),f=a[e];if(f!==Dl[e]){const p=f.apply(t,s);return u?ve(p):p}let d=n;a!==t&&(u?d=function(p,h){return n.call(this,ve(p),h,t)}:n.length>2&&(d=function(p,h){return n.call(this,p,h,t)}));const c=f.call(a,d,o);return u&&i?i(c):c}function jo(t,e,n,o){const i=xo(t);let s=n;return i!==t&&(be(t)?n.length>3&&(s=function(a,u,f){return n.call(this,a,u,f,t)}):s=function(a,u,f){return n.call(this,a,ve(u),f,t)}),i[e](s,...o)}function On(t,e,n){const o=Q(t);me(o,"iterate",en);const i=o[e](...n);return(i===-1||i===!1)&&bo(n[0])?(n[0]=Q(n[0]),o[e](...n)):i}function Vt(t,e,n=[]){Xe(),Po();const o=Q(t)[e].apply(t,n);return Ro(),Qe(),o}const bl=vo("__proto__,__v_isRef,__isVue"),tr=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Dt));function Ul(t){Dt(t)||(t=String(t));const e=Q(this);return me(e,"has",t),e.hasOwnProperty(t)}class nr{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,o){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return o===(i?s?$l:rr:s?sr:ir).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(o)?e:void 0;const a=B(e);if(!i){let f;if(a&&(f=Nl[n]))return f;if(n==="hasOwnProperty")return Ul}const u=Reflect.get(e,n,ye(e)?e:o);if((Dt(n)?tr.has(n):bl(n))||(i||me(e,"get",n),s))return u;if(ye(u)){const f=a&&So(n)?u:u.value;return i&&de(f)?to(f):f}return de(u)?i?to(u):tn(u):u}}class or extends nr{constructor(e=!1){super(!1,e)}set(e,n,o,i){let s=e[n];if(!this._isShallow){const f=gt(s);if(!be(o)&&!gt(o)&&(s=Q(s),o=Q(o)),!B(e)&&ye(s)&&!ye(o))return f||(s.value=o),!0}const a=B(e)&&So(n)?Number(n)<e.length:Z(e,n),u=Reflect.set(e,n,o,ye(e)?e:i);return e===Q(i)&&(a?rt(o,s)&&ze(e,"set",n,o):ze(e,"add",n,o)),u}deleteProperty(e,n){const o=Z(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&o&&ze(e,"delete",n,void 0),i}has(e,n){const o=Reflect.has(e,n);return(!Dt(n)||!tr.has(n))&&me(e,"has",n),o}ownKeys(e){return me(e,"iterate",B(e)?"length":ht),Reflect.ownKeys(e)}}class Ll extends nr{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const kl=new or,Fl=new Ll,Vl=new or(!0);const eo=t=>t,dn=t=>Reflect.getPrototypeOf(t);function Gl(t,e,n){return function(...o){const i=this.__v_raw,s=Q(i),a=$t(s),u=t==="entries"||t===Symbol.iterator&&a,f=t==="keys"&&a,d=i[t](...o),c=n?eo:e?no:ve;return!e&&me(s,"iterate",f?jn:ht),{next(){const{value:p,done:h}=d.next();return h?{value:p,done:h}:{value:u?[c(p[0]),c(p[1])]:c(p),done:h}},[Symbol.iterator](){return this}}}}function cn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ql(t,e){const n={get(i){const s=this.__v_raw,a=Q(s),u=Q(i);t||(rt(i,u)&&me(a,"get",i),me(a,"get",u));const{has:f}=dn(a),d=e?eo:t?no:ve;if(f.call(a,i))return d(s.get(i));if(f.call(a,u))return d(s.get(u));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!t&&me(Q(i),"iterate",ht),i.size},has(i){const s=this.__v_raw,a=Q(s),u=Q(i);return t||(rt(i,u)&&me(a,"has",i),me(a,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const a=this,u=a.__v_raw,f=Q(u),d=e?eo:t?no:ve;return!t&&me(f,"iterate",ht),u.forEach((c,p)=>i.call(s,d(c),d(p),a))}};return Se(n,t?{add:cn("add"),set:cn("set"),delete:cn("delete"),clear:cn("clear")}:{add(i){!e&&!be(i)&&!gt(i)&&(i=Q(i));const s=Q(this);return dn(s).has.call(s,i)||(s.add(i),ze(s,"add",i,i)),this},set(i,s){!e&&!be(s)&&!gt(s)&&(s=Q(s));const a=Q(this),{has:u,get:f}=dn(a);let d=u.call(a,i);d||(i=Q(i),d=u.call(a,i));const c=f.call(a,i);return a.set(i,s),d?rt(s,c)&&ze(a,"set",i,s):ze(a,"add",i,s),this},delete(i){const s=Q(this),{has:a,get:u}=dn(s);let f=a.call(s,i);f||(i=Q(i),f=a.call(s,i)),u&&u.call(s,i);const d=s.delete(i);return f&&ze(s,"delete",i,void 0),d},clear(){const i=Q(this),s=i.size!==0,a=i.clear();return s&&ze(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Gl(i,t,e)}),n}function No(t,e){const n=ql(t,e);return(o,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?o:Reflect.get(Z(n,i)&&i in o?n:o,i,s)}const Hl={get:No(!1,!1)},Bl={get:No(!1,!0)},Jl={get:No(!0,!1)};const ir=new WeakMap,sr=new WeakMap,rr=new WeakMap,$l=new WeakMap;function Ol(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kl(t){return t.__v_skip||!Object.isExtensible(t)?0:Ol(gl(t))}function tn(t){return gt(t)?t:Do(t,!1,kl,Hl,ir)}function Wl(t){return Do(t,!1,Vl,Bl,sr)}function to(t){return Do(t,!0,Fl,Jl,rr)}function Do(t,e,n,o,i){if(!de(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Kl(t);if(s===0)return t;const a=i.get(t);if(a)return a;const u=new Proxy(t,s===2?o:n);return i.set(t,u),u}function Yt(t){return gt(t)?Yt(t.__v_raw):!!(t&&t.__v_isReactive)}function gt(t){return!!(t&&t.__v_isReadonly)}function be(t){return!!(t&&t.__v_isShallow)}function bo(t){return t?!!t.__v_raw:!1}function Q(t){const e=t&&t.__v_raw;return e?Q(e):t}function Yl(t){return!Z(t,"__v_skip")&&Object.isExtensible(t)&&vn(t,"__v_skip",!0),t}const ve=t=>de(t)?tn(t):t,no=t=>de(t)?to(t):t;function ye(t){return t?t.__v_isRef===!0:!1}function fe(t){return zl(t,!1)}function zl(t,e){return ye(t)?t:new Xl(t,e)}class Xl{constructor(e,n){this.dep=new wo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Q(e),this._value=n?e:ve(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,o=this.__v_isShallow||be(e)||gt(e);e=o?e:Q(e),rt(e,n)&&(this._rawValue=e,this._value=o?e:ve(e),this.dep.trigger())}}function Ql(t){return ye(t)?t.value:t}const Zl={get:(t,e,n)=>e==="__v_raw"?t:Ql(Reflect.get(t,e,n)),set:(t,e,n,o)=>{const i=t[e];return ye(i)&&!ye(n)?(i.value=n,!0):Reflect.set(t,e,n,o)}};function lr(t){return Yt(t)?t:new Proxy(t,Zl)}class jl{constructor(e,n,o){this.fn=e,this.setter=n,this._value=void 0,this.dep=new wo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=jt-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&se!==this)return zs(this,!0),!0}get value(){const e=this.dep.track();return Zs(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ea(t,e,n=!1){let o,i;return O(t)?o=t:(o=t.get,i=t.set),new jl(o,i,n)}const pn={},Cn=new WeakMap;let ct;function ta(t,e=!1,n=ct){if(n){let o=Cn.get(n);o||Cn.set(n,o=[]),o.push(t)}}function na(t,e,n=re){const{immediate:o,deep:i,once:s,scheduler:a,augmentJob:u,call:f}=n,d=I=>i?I:be(I)||i===!1||i===0?ot(I,1):ot(I);let c,p,h,y,_=!1,v=!1;if(ye(t)?(p=()=>t.value,_=be(t)):Yt(t)?(p=()=>d(t),_=!0):B(t)?(v=!0,_=t.some(I=>Yt(I)||be(I)),p=()=>t.map(I=>{if(ye(I))return I.value;if(Yt(I))return d(I);if(O(I))return f?f(I,2):I()})):O(t)?e?p=f?()=>f(t,2):t:p=()=>{if(h){Xe();try{h()}finally{Qe()}}const I=ct;ct=c;try{return f?f(t,3,[y]):t(y)}finally{ct=I}}:p=Ne,e&&i){const I=p,U=i===!0?1/0:i;p=()=>ot(I(),U)}const N=Ml(),P=()=>{c.stop(),N&&N.active&&Eo(N.effects,c)};if(s&&e){const I=e;e=(...U)=>{I(...U),P()}}let M=v?new Array(t.length).fill(pn):pn;const R=I=>{if(!(!(c.flags&1)||!c.dirty&&!I))if(e){const U=c.run();if(i||_||(v?U.some((q,F)=>rt(q,M[F])):rt(U,M))){h&&h();const q=ct;ct=c;try{const F=[U,M===pn?void 0:v&&M[0]===pn?[]:M,y];M=U,f?f(e,3,F):e(...F)}finally{ct=q}}}else c.run()};return u&&u(R),c=new Ws(p),c.scheduler=a?()=>a(R,!1):R,y=I=>ta(I,!1,c),h=c.onStop=()=>{const I=Cn.get(c);if(I){if(f)f(I,4);else for(const U of I)U();Cn.delete(c)}},e?o?R(!0):M=c.run():a?a(R.bind(null,!0),!0):c.run(),P.pause=c.pause.bind(c),P.resume=c.resume.bind(c),P.stop=P,P}function ot(t,e=1/0,n){if(e<=0||!de(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,ye(t))ot(t.value,e,n);else if(B(t))for(let o=0;o<t.length;o++)ot(t[o],e,n);else if(hl(t)||$t(t))t.forEach(o=>{ot(o,e,n)});else if(yl(t)){for(const o in t)ot(t[o],e,n);for(const o of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,o)&&ot(t[o],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function rn(t,e,n,o){try{return o?t(...o):t()}catch(i){Dn(i,e,n)}}function $e(t,e,n,o){if(O(t)){const i=rn(t,e,n,o);return i&&$s(i)&&i.catch(s=>{Dn(s,e,n)}),i}if(B(t)){const i=[];for(let s=0;s<t.length;s++)i.push($e(t[s],e,n,o));return i}}function Dn(t,e,n,o=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||re;if(e){let u=e.parent;const f=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const c=u.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](t,f,d)===!1)return}u=u.parent}if(s){Xe(),rn(s,null,10,[t,f,d]),Qe();return}}oa(t,n,i,o,a)}function oa(t,e,n,o=!0,i=!1){if(i)throw t;console.error(t)}const Ce=[];let Ge=-1;const At=[];let tt=null,St=0;const ar=Promise.resolve();let En=null;function ia(t){const e=En||ar;return t?e.then(this?t.bind(this):t):e}function sa(t){let e=Ge+1,n=Ce.length;for(;e<n;){const o=e+n>>>1,i=Ce[o],s=nn(i);s<t||s===t&&i.flags&2?e=o+1:n=o}return e}function Uo(t){if(!(t.flags&1)){const e=nn(t),n=Ce[Ce.length-1];!n||!(t.flags&2)&&e>=nn(n)?Ce.push(t):Ce.splice(sa(e),0,t),t.flags|=1,ur()}}function ur(){En||(En=ar.then(dr))}function ra(t){B(t)?At.push(...t):tt&&t.id===-1?tt.splice(St+1,0,t):t.flags&1||(At.push(t),t.flags|=1),ur()}function ei(t,e,n=Ge+1){for(;n<Ce.length;n++){const o=Ce[n];if(o&&o.flags&2){if(t&&o.id!==t.uid)continue;Ce.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function fr(t){if(At.length){const e=[...new Set(At)].sort((n,o)=>nn(n)-nn(o));if(At.length=0,tt){tt.push(...e);return}for(tt=e,St=0;St<tt.length;St++){const n=tt[St];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}tt=null,St=0}}const nn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function dr(t){try{for(Ge=0;Ge<Ce.length;Ge++){const e=Ce[Ge];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),rn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ge<Ce.length;Ge++){const e=Ce[Ge];e&&(e.flags&=-2)}Ge=-1,Ce.length=0,fr(),En=null,(Ce.length||At.length)&&dr()}}let Be,Ht=[],oo=!1;function bn(t,...e){Be?Be.emit(t,...e):oo||Ht.push({event:t,args:e})}function cr(t,e){var n,o;Be=t,Be?(Be.enabled=!0,Ht.forEach(({event:i,args:s})=>Be.emit(i,...s)),Ht=[]):typeof window<"u"&&window.HTMLElement&&!((o=(n=window.navigator)==null?void 0:n.userAgent)!=null&&o.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{cr(s,e)}),setTimeout(()=>{Be||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,oo=!0,Ht=[])},3e3)):(oo=!0,Ht=[])}function la(t,e){bn("app:init",t,e,{Fragment:qe,Text:ln,Comment:yt,Static:mn})}function aa(t){bn("app:unmount",t)}const ua=Lo("component:added"),pr=Lo("component:updated"),fa=Lo("component:removed"),da=t=>{Be&&typeof Be.cleanupBuffer=="function"&&!Be.cleanupBuffer(t)&&fa(t)};function Lo(t){return e=>{bn(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}function ca(t,e,n){bn("component:emit",t.appContext.app,t,e,n)}let Je=null,hr=null;function Sn(t){const e=Je;return Je=t,hr=t&&t.type.__scopeId||null,e}function pa(t,e=Je,n){if(!e||t._n)return t;const o=(...i)=>{o._d&&fi(-1);const s=Sn(e);let a;try{a=t(...i)}finally{Sn(s),o._d&&fi(1)}return __VUE_PROD_DEVTOOLS__&&pr(e),a};return o._n=!0,o._c=!0,o._d=!0,o}function ft(t,e,n,o){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const u=i[a];s&&(u.oldValue=s[a].value);let f=u.dir[o];f&&(Xe(),$e(f,n,8,[t.el,u,t,e]),Qe())}}const ha=Symbol("_vte"),ma=t=>t.__isTeleport,ga=Symbol("_leaveCb");function ko(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ko(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mr(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const In=new WeakMap;function zt(t,e,n,o,i=!1){if(B(t)){t.forEach((_,v)=>zt(_,e&&(B(e)?e[v]:e),n,o,i));return}if(Xt(o)&&!i){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&zt(t,e,n,o.component.subTree);return}const s=o.shapeFlag&4?Ho(o.component):o.el,a=i?null:s,{i:u,r:f}=t,d=e&&e.r,c=u.refs===re?u.refs={}:u.refs,p=u.setupState,h=Q(p),y=p===re?Js:_=>Z(h,_);if(d!=null&&d!==f){if(ti(e),ce(d))c[d]=null,y(d)&&(p[d]=null);else if(ye(d)){d.value=null;const _=e;_.k&&(c[_.k]=null)}}if(O(f))rn(f,u,12,[a,c]);else{const _=ce(f),v=ye(f);if(_||v){const N=()=>{if(t.f){const P=_?y(f)?p[f]:c[f]:f.value;if(i)B(P)&&Eo(P,s);else if(B(P))P.includes(s)||P.push(s);else if(_)c[f]=[s],y(f)&&(p[f]=c[f]);else{const M=[s];f.value=M,t.k&&(c[t.k]=M)}}else _?(c[f]=a,y(f)&&(p[f]=a)):v&&(f.value=a,t.k&&(c[t.k]=a))};if(a){const P=()=>{N(),In.delete(t)};P.id=-1,In.set(t,P),Me(P,n)}else ti(t),N()}}}function ti(t){const e=In.get(t);e&&(e.flags|=8,In.delete(t))}pt().requestIdleCallback;pt().cancelIdleCallback;const Xt=t=>!!t.type.__asyncLoader,gr=t=>t.type.__isKeepAlive;function ya(t,e){yr(t,"a",e)}function _a(t,e){yr(t,"da",e)}function yr(t,e,n=Ee){const o=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Un(e,o,n),n){let i=n.parent;for(;i&&i.parent;)gr(i.parent.vnode)&&Ta(o,e,n,i),i=i.parent}}function Ta(t,e,n,o){const i=Un(e,t,o,!0);Tr(()=>{Eo(o[e],i)},n)}function Un(t,e,n=Ee,o=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{Xe();const u=an(n),f=$e(e,n,t,a);return u(),Qe(),f});return o?i.unshift(s):i.push(s),s}}const Ze=t=>(e,n=Ee)=>{(!on||t==="sp")&&Un(t,(...o)=>e(...o),n)},va=Ze("bm"),_r=Ze("m"),Ca=Ze("bu"),Ea=Ze("u"),Sa=Ze("bum"),Tr=Ze("um"),Ia=Ze("sp"),Aa=Ze("rtg"),Pa=Ze("rtc");function Ra(t,e=Ee){Un("ec",t,e)}const Ma=Symbol.for("v-ndc"),io=t=>t?Gr(t)?Ho(t):io(t.parent):null,Qt=Se(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>io(t.parent),$root:t=>io(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>__VUE_OPTIONS_API__?Cr(t):t.type,$forceUpdate:t=>t.f||(t.f=()=>{Uo(t.update)}),$nextTick:t=>t.n||(t.n=ia.bind(t.proxy)),$watch:t=>__VUE_OPTIONS_API__?Qa.bind(t):Ne}),Kn=(t,e)=>t!==re&&!t.__isScriptSetup&&Z(t,e),wa={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:o,data:i,props:s,accessCache:a,type:u,appContext:f}=t;let d;if(e[0]!=="$"){const y=a[e];if(y!==void 0)switch(y){case 1:return o[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Kn(o,e))return a[e]=1,o[e];if(i!==re&&Z(i,e))return a[e]=2,i[e];if((d=t.propsOptions[0])&&Z(d,e))return a[e]=3,s[e];if(n!==re&&Z(n,e))return a[e]=4,n[e];(!__VUE_OPTIONS_API__||so)&&(a[e]=0)}}const c=Qt[e];let p,h;if(c)return e==="$attrs"&&me(t.attrs,"get",""),c(t);if((p=u.__cssModules)&&(p=p[e]))return p;if(n!==re&&Z(n,e))return a[e]=4,n[e];if(h=f.config.globalProperties,Z(h,e))return h[e]},set({_:t},e,n){const{data:o,setupState:i,ctx:s}=t;return Kn(i,e)?(i[e]=n,!0):o!==re&&Z(o,e)?(o[e]=n,!0):Z(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:o,appContext:i,propsOptions:s,type:a}},u){let f,d;return!!(n[u]||t!==re&&u[0]!=="$"&&Z(t,u)||Kn(e,u)||(f=s[0])&&Z(f,u)||Z(o,u)||Z(Qt,u)||Z(i.config.globalProperties,u)||(d=a.__cssModules)&&d[u])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Z(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ni(t){return B(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let so=!0;function xa(t){const e=Cr(t),n=t.proxy,o=t.ctx;so=!1,e.beforeCreate&&oi(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:u,provide:f,inject:d,created:c,beforeMount:p,mounted:h,beforeUpdate:y,updated:_,activated:v,deactivated:N,beforeDestroy:P,beforeUnmount:M,destroyed:R,unmounted:I,render:U,renderTracked:q,renderTriggered:F,errorCaptured:te,serverPrefetch:V,expose:J,inheritAttrs:ae,components:z,directives:pe,filters:et}=e;if(d&&Na(d,o,null),a)for(const j in a){const X=a[j];O(X)&&(o[j]=X.bind(n))}if(i){const j=i.call(n,n);de(j)&&(t.data=tn(j))}if(so=!0,s)for(const j in s){const X=s[j],Oe=O(X)?X.bind(n,n):O(X.get)?X.get.bind(n,n):Ne,Ct=!O(X)&&O(X.set)?X.set.bind(n):Ne,Ke=vu({get:Oe,set:Ct});Object.defineProperty(o,j,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:we=>Ke.value=we})}if(u)for(const j in u)vr(u[j],o,n,j);if(f){const j=O(f)?f.call(n):f;Reflect.ownKeys(j).forEach(X=>{Fa(X,j[X])})}c&&oi(c,t,"c");function oe(j,X){B(X)?X.forEach(Oe=>j(Oe.bind(n))):X&&j(X.bind(n))}if(oe(va,p),oe(_r,h),oe(Ca,y),oe(Ea,_),oe(ya,v),oe(_a,N),oe(Ra,te),oe(Pa,q),oe(Aa,F),oe(Sa,M),oe(Tr,I),oe(Ia,V),B(J))if(J.length){const j=t.exposed||(t.exposed={});J.forEach(X=>{Object.defineProperty(j,X,{get:()=>n[X],set:Oe=>n[X]=Oe,enumerable:!0})})}else t.exposed||(t.exposed={});U&&t.render===Ne&&(t.render=U),ae!=null&&(t.inheritAttrs=ae),z&&(t.components=z),pe&&(t.directives=pe),V&&mr(t)}function Na(t,e,n=Ne){B(t)&&(t=ro(t));for(const o in t){const i=t[o];let s;de(i)?"default"in i?s=hn(i.from||o,i.default,!0):s=hn(i.from||o):s=hn(i),ye(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[o]=s}}function oi(t,e,n){$e(B(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,n)}function vr(t,e,n,o){let i=o.includes(".")?Ur(n,o):()=>n[o];if(ce(t)){const s=e[t];O(s)&&Rt(i,s)}else if(O(t))Rt(i,t.bind(n));else if(de(t))if(B(t))t.forEach(s=>vr(s,e,n,o));else{const s=O(t.handler)?t.handler.bind(n):e[t.handler];O(s)&&Rt(i,s,t)}}function Cr(t){const e=t.type,{mixins:n,extends:o}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,u=s.get(e);let f;return u?f=u:!i.length&&!n&&!o?f=e:(f={},i.length&&i.forEach(d=>An(f,d,a,!0)),An(f,e,a)),de(e)&&s.set(e,f),f}function An(t,e,n,o=!1){const{mixins:i,extends:s}=e;s&&An(t,s,n,!0),i&&i.forEach(a=>An(t,a,n,!0));for(const a in e)if(!(o&&a==="expose")){const u=Da[a]||n&&n[a];t[a]=u?u(t[a],e[a]):e[a]}return t}const Da={data:ii,props:si,emits:si,methods:Bt,computed:Bt,beforeCreate:Te,created:Te,beforeMount:Te,mounted:Te,beforeUpdate:Te,updated:Te,beforeDestroy:Te,beforeUnmount:Te,destroyed:Te,unmounted:Te,activated:Te,deactivated:Te,errorCaptured:Te,serverPrefetch:Te,components:Bt,directives:Bt,watch:Ua,provide:ii,inject:ba};function ii(t,e){return e?t?function(){return Se(O(t)?t.call(this,this):t,O(e)?e.call(this,this):e)}:e:t}function ba(t,e){return Bt(ro(t),ro(e))}function ro(t){if(B(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Te(t,e){return t?[...new Set([].concat(t,e))]:e}function Bt(t,e){return t?Se(Object.create(null),t,e):e}function si(t,e){return t?B(t)&&B(e)?[...new Set([...t,...e])]:Se(Object.create(null),ni(t),ni(e??{})):e}function Ua(t,e){if(!t)return e;if(!e)return t;const n=Se(Object.create(null),t);for(const o in e)n[o]=Te(t[o],e[o]);return n}function Er(){return{app:null,config:{isNativeTag:Js,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let La=0;function ka(t,e){return function(o,i=null){O(o)||(o=Se({},o)),i!=null&&!de(i)&&(i=null);const s=Er(),a=new WeakSet,u=[];let f=!1;const d=s.app={_uid:La++,_component:o,_props:i,_container:null,_context:s,_instance:null,version:pi,get config(){return s.config},set config(c){},use(c,...p){return a.has(c)||(c&&O(c.install)?(a.add(c),c.install(d,...p)):O(c)&&(a.add(c),c(d,...p))),d},mixin(c){return __VUE_OPTIONS_API__&&(s.mixins.includes(c)||s.mixins.push(c)),d},component(c,p){return p?(s.components[c]=p,d):s.components[c]},directive(c,p){return p?(s.directives[c]=p,d):s.directives[c]},mount(c,p,h){if(!f){const y=d._ceVNode||mt(o,i);return y.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),t(y,c,h),f=!0,d._container=c,c.__vue_app__=d,__VUE_PROD_DEVTOOLS__&&(d._instance=y.component,la(d,pi)),Ho(y.component)}},onUnmount(c){u.push(c)},unmount(){f&&($e(u,d._instance,16),t(null,d._container),__VUE_PROD_DEVTOOLS__&&(d._instance=null,aa(d)),delete d._container.__vue_app__)},provide(c,p){return s.provides[c]=p,d},runWithContext(c){const p=Pt;Pt=d;try{return c()}finally{Pt=p}}};return d}}let Pt=null;function Fa(t,e){if(Ee){let n=Ee.provides;const o=Ee.parent&&Ee.parent.provides;o===n&&(n=Ee.provides=Object.create(o)),n[t]=e}}function hn(t,e,n=!1){const o=hu();if(o||Pt){let i=Pt?Pt._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&O(e)?e.call(o&&o.proxy):e}}const Sr={},Ir=()=>Object.create(Sr),Ar=t=>Object.getPrototypeOf(t)===Sr;function Va(t,e,n,o=!1){const i={},s=Ir();t.propsDefaults=Object.create(null),Pr(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=o?i:Wl(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Ga(t,e,n,o){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,u=Q(i),[f]=t.propsOptions;let d=!1;if((o||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let p=0;p<c.length;p++){let h=c[p];if(Ln(t.emitsOptions,h))continue;const y=e[h];if(f)if(Z(s,h))y!==s[h]&&(s[h]=y,d=!0);else{const _=lt(h);i[_]=lo(f,u,_,y,t,!1)}else y!==s[h]&&(s[h]=y,d=!0)}}}else{Pr(t,e,i,s)&&(d=!0);let c;for(const p in u)(!e||!Z(e,p)&&((c=Tt(p))===p||!Z(e,c)))&&(f?n&&(n[p]!==void 0||n[c]!==void 0)&&(i[p]=lo(f,u,p,void 0,t,!0)):delete i[p]);if(s!==u)for(const p in s)(!e||!Z(e,p))&&(delete s[p],d=!0)}d&&ze(t.attrs,"set","")}function Pr(t,e,n,o){const[i,s]=t.propsOptions;let a=!1,u;if(e)for(let f in e){if(Ot(f))continue;const d=e[f];let c;i&&Z(i,c=lt(f))?!s||!s.includes(c)?n[c]=d:(u||(u={}))[c]=d:Ln(t.emitsOptions,f)||(!(f in o)||d!==o[f])&&(o[f]=d,a=!0)}if(s){const f=Q(n),d=u||re;for(let c=0;c<s.length;c++){const p=s[c];n[p]=lo(i,f,p,d[p],t,!Z(d,p))}}return a}function lo(t,e,n,o,i,s){const a=t[n];if(a!=null){const u=Z(a,"default");if(u&&o===void 0){const f=a.default;if(a.type!==Function&&!a.skipFactory&&O(f)){const{propsDefaults:d}=i;if(n in d)o=d[n];else{const c=an(i);o=d[n]=f.call(null,e),c()}}else o=f;i.ce&&i.ce._setProp(n,o)}a[0]&&(s&&!u?o=!1:a[1]&&(o===""||o===Tt(n))&&(o=!0))}return o}const qa=new WeakMap;function Rr(t,e,n=!1){const o=__VUE_OPTIONS_API__&&n?qa:e.propsCache,i=o.get(t);if(i)return i;const s=t.props,a={},u=[];let f=!1;if(__VUE_OPTIONS_API__&&!O(t)){const c=p=>{f=!0;const[h,y]=Rr(p,e,!0);Se(a,h),y&&u.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!f)return de(t)&&o.set(t,Jt),Jt;if(B(s))for(let c=0;c<s.length;c++){const p=lt(s[c]);ri(p)&&(a[p]=re)}else if(s)for(const c in s){const p=lt(c);if(ri(p)){const h=s[c],y=a[p]=B(h)||O(h)?{type:h}:Se({},h),_=y.type;let v=!1,N=!0;if(B(_))for(let P=0;P<_.length;++P){const M=_[P],R=O(M)&&M.name;if(R==="Boolean"){v=!0;break}else R==="String"&&(N=!1)}else v=O(_)&&_.name==="Boolean";y[0]=v,y[1]=N,(v||Z(y,"default"))&&u.push(p)}}const d=[a,u];return de(t)&&o.set(t,d),d}function ri(t){return t[0]!=="$"&&!Ot(t)}const Fo=t=>t==="_"||t==="_ctx"||t==="$stable",Vo=t=>B(t)?t.map(He):[He(t)],Ha=(t,e,n)=>{if(e._n)return e;const o=pa((...i)=>Vo(e(...i)),n);return o._c=!1,o},Mr=(t,e,n)=>{const o=t._ctx;for(const i in t){if(Fo(i))continue;const s=t[i];if(O(s))e[i]=Ha(i,s,o);else if(s!=null){const a=Vo(s);e[i]=()=>a}}},wr=(t,e)=>{const n=Vo(e);t.slots.default=()=>n},xr=(t,e,n)=>{for(const o in e)(n||!Fo(o))&&(t[o]=e[o])},Ba=(t,e,n)=>{const o=t.slots=Ir();if(t.vnode.shapeFlag&32){const i=e._;i?(xr(o,e,n),n&&vn(o,"_",i,!0)):Mr(e,o)}else e&&wr(t,e)},Ja=(t,e,n)=>{const{vnode:o,slots:i}=t;let s=!0,a=re;if(o.shapeFlag&32){const u=e._;u?n&&u===1?s=!1:xr(i,e,n):(s=!e.$stable,Mr(e,i)),a=e}else e&&(wr(t,e),a={default:1});if(s)for(const u in i)!Fo(u)&&a[u]==null&&delete i[u]};function $a(){typeof __VUE_OPTIONS_API__!="boolean"&&(pt().__VUE_OPTIONS_API__=!0),typeof __VUE_PROD_DEVTOOLS__!="boolean"&&(pt().__VUE_PROD_DEVTOOLS__=!1),typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(pt().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const Me=su;function Oa(t){return Ka(t)}function Ka(t,e){$a();const n=pt();n.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&cr(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:o,remove:i,patchProp:s,createElement:a,createText:u,createComment:f,setText:d,setElementText:c,parentNode:p,nextSibling:h,setScopeId:y=Ne,insertStaticContent:_}=t,v=(m,g,T,C=null,E=null,S=null,D=void 0,x=null,w=!!g.dynamicChildren)=>{if(m===g)return;m&&!Gt(m,g)&&(C=ne(m),we(m,E,S,!0),m=null),g.patchFlag===-2&&(w=!1,g.dynamicChildren=null);const{type:A,ref:G,shapeFlag:b}=g;switch(A){case ln:N(m,g,T,C);break;case yt:P(m,g,T,C);break;case mn:m==null&&M(g,T,C,D);break;case qe:z(m,g,T,C,E,S,D,x,w);break;default:b&1?U(m,g,T,C,E,S,D,x,w):b&6?pe(m,g,T,C,E,S,D,x,w):(b&64||b&128)&&A.process(m,g,T,C,E,S,D,x,w,he)}G!=null&&E?zt(G,m&&m.ref,S,g||m,!g):G==null&&m&&m.ref!=null&&zt(m.ref,null,S,m,!0)},N=(m,g,T,C)=>{if(m==null)o(g.el=u(g.children),T,C);else{const E=g.el=m.el;g.children!==m.children&&d(E,g.children)}},P=(m,g,T,C)=>{m==null?o(g.el=f(g.children||""),T,C):g.el=m.el},M=(m,g,T,C)=>{[m.el,m.anchor]=_(m.children,g,T,C,m.el,m.anchor)},R=({el:m,anchor:g},T,C)=>{let E;for(;m&&m!==g;)E=h(m),o(m,T,C),m=E;o(g,T,C)},I=({el:m,anchor:g})=>{let T;for(;m&&m!==g;)T=h(m),i(m),m=T;i(g)},U=(m,g,T,C,E,S,D,x,w)=>{g.type==="svg"?D="svg":g.type==="math"&&(D="mathml"),m==null?q(g,T,C,E,S,D,x,w):V(m,g,E,S,D,x,w)},q=(m,g,T,C,E,S,D,x)=>{let w,A;const{props:G,shapeFlag:b,transition:k,dirs:H}=m;if(w=m.el=a(m.type,S,G&&G.is,G),b&8?c(w,m.children):b&16&&te(m.children,w,null,C,E,Wn(m,S),D,x),H&&ft(m,null,C,"created"),F(w,m,m.scopeId,D,C),G){for(const ie in G)ie!=="value"&&!Ot(ie)&&s(w,ie,null,G[ie],S,C);"value"in G&&s(w,"value",null,G.value,S),(A=G.onVnodeBeforeMount)&&Ve(A,C,m)}__VUE_PROD_DEVTOOLS__&&(vn(w,"__vnode",m,!0),vn(w,"__vueParentComponent",C,!0)),H&&ft(m,null,C,"beforeMount");const W=Wa(E,k);W&&k.beforeEnter(w),o(w,g,T),((A=G&&G.onVnodeMounted)||W||H)&&Me(()=>{A&&Ve(A,C,m),W&&k.enter(w),H&&ft(m,null,C,"mounted")},E)},F=(m,g,T,C,E)=>{if(T&&y(m,T),C)for(let S=0;S<C.length;S++)y(m,C[S]);if(E){let S=E.subTree;if(g===S||kr(S.type)&&(S.ssContent===g||S.ssFallback===g)){const D=E.vnode;F(m,D,D.scopeId,D.slotScopeIds,E.parent)}}},te=(m,g,T,C,E,S,D,x,w=0)=>{for(let A=w;A<m.length;A++){const G=m[A]=x?nt(m[A]):He(m[A]);v(null,G,g,T,C,E,S,D,x)}},V=(m,g,T,C,E,S,D)=>{const x=g.el=m.el;__VUE_PROD_DEVTOOLS__&&(x.__vnode=g);let{patchFlag:w,dynamicChildren:A,dirs:G}=g;w|=m.patchFlag&16;const b=m.props||re,k=g.props||re;let H;if(T&&dt(T,!1),(H=k.onVnodeBeforeUpdate)&&Ve(H,T,g,m),G&&ft(g,m,T,"beforeUpdate"),T&&dt(T,!0),(b.innerHTML&&k.innerHTML==null||b.textContent&&k.textContent==null)&&c(x,""),A?J(m.dynamicChildren,A,x,T,C,Wn(g,E),S):D||X(m,g,x,null,T,C,Wn(g,E),S,!1),w>0){if(w&16)ae(x,b,k,T,E);else if(w&2&&b.class!==k.class&&s(x,"class",null,k.class,E),w&4&&s(x,"style",b.style,k.style,E),w&8){const W=g.dynamicProps;for(let ie=0;ie<W.length;ie++){const ee=W[ie],Ie=b[ee],Ae=k[ee];(Ae!==Ie||ee==="value")&&s(x,ee,Ie,Ae,E,T)}}w&1&&m.children!==g.children&&c(x,g.children)}else!D&&A==null&&ae(x,b,k,T,E);((H=k.onVnodeUpdated)||G)&&Me(()=>{H&&Ve(H,T,g,m),G&&ft(g,m,T,"updated")},C)},J=(m,g,T,C,E,S,D)=>{for(let x=0;x<g.length;x++){const w=m[x],A=g[x],G=w.el&&(w.type===qe||!Gt(w,A)||w.shapeFlag&198)?p(w.el):T;v(w,A,G,null,C,E,S,D,!0)}},ae=(m,g,T,C,E)=>{if(g!==T){if(g!==re)for(const S in g)!Ot(S)&&!(S in T)&&s(m,S,g[S],null,E,C);for(const S in T){if(Ot(S))continue;const D=T[S],x=g[S];D!==x&&S!=="value"&&s(m,S,x,D,E,C)}"value"in T&&s(m,"value",g.value,T.value,E)}},z=(m,g,T,C,E,S,D,x,w)=>{const A=g.el=m?m.el:u(""),G=g.anchor=m?m.anchor:u("");let{patchFlag:b,dynamicChildren:k,slotScopeIds:H}=g;H&&(x=x?x.concat(H):H),m==null?(o(A,T,C),o(G,T,C),te(g.children||[],T,G,E,S,D,x,w)):b>0&&b&64&&k&&m.dynamicChildren?(J(m.dynamicChildren,k,T,E,S,D,x),(g.key!=null||E&&g===E.subTree)&&Nr(m,g,!0)):X(m,g,T,G,E,S,D,x,w)},pe=(m,g,T,C,E,S,D,x,w)=>{g.slotScopeIds=x,m==null?g.shapeFlag&512?E.ctx.activate(g,T,C,D,w):et(g,T,C,E,S,D,w):ut(m,g,w)},et=(m,g,T,C,E,S,D)=>{const x=m.component=pu(m,C,E);if(gr(m)&&(x.ctx.renderer=he),mu(x,!1,D),x.asyncDep){if(E&&E.registerDep(x,oe,D),!m.el){const w=x.subTree=mt(yt);P(null,w,g,T),m.placeholder=w.el}}else oe(x,m,g,T,E,S,D)},ut=(m,g,T)=>{const C=g.component=m.component;if(ou(m,g,T))if(C.asyncDep&&!C.asyncResolved){j(C,g,T);return}else C.next=g,C.update();else g.el=m.el,C.vnode=g},oe=(m,g,T,C,E,S,D)=>{const x=()=>{if(m.isMounted){let{next:b,bu:k,u:H,parent:W,vnode:ie}=m;{const ke=Dr(m);if(ke){b&&(b.el=ie.el,j(m,b,D)),ke.asyncDep.then(()=>{m.isUnmounted||x()});return}}let ee=b,Ie;dt(m,!1),b?(b.el=ie.el,j(m,b,D)):b=ie,k&&Bn(k),(Ie=b.props&&b.props.onVnodeBeforeUpdate)&&Ve(Ie,W,b,ie),dt(m,!0);const Ae=ai(m),Le=m.subTree;m.subTree=Ae,v(Le,Ae,p(Le.el),ne(Le),m,E,S),b.el=Ae.el,ee===null&&iu(m,Ae.el),H&&Me(H,E),(Ie=b.props&&b.props.onVnodeUpdated)&&Me(()=>Ve(Ie,W,b,ie),E),__VUE_PROD_DEVTOOLS__&&pr(m)}else{let b;const{el:k,props:H}=g,{bm:W,m:ie,parent:ee,root:Ie,type:Ae}=m,Le=Xt(g);dt(m,!1),W&&Bn(W),!Le&&(b=H&&H.onVnodeBeforeMount)&&Ve(b,ee,g),dt(m,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Ae);const ke=m.subTree=ai(m);v(null,ke,T,C,m,E,S),g.el=ke.el}if(ie&&Me(ie,E),!Le&&(b=H&&H.onVnodeMounted)){const ke=g;Me(()=>Ve(b,ee,ke),E)}(g.shapeFlag&256||ee&&Xt(ee.vnode)&&ee.vnode.shapeFlag&256)&&m.a&&Me(m.a,E),m.isMounted=!0,__VUE_PROD_DEVTOOLS__&&ua(m),g=T=C=null}};m.scope.on();const w=m.effect=new Ws(x);m.scope.off();const A=m.update=w.run.bind(w),G=m.job=w.runIfDirty.bind(w);G.i=m,G.id=m.uid,w.scheduler=()=>Uo(G),dt(m,!0),A()},j=(m,g,T)=>{g.component=m;const C=m.vnode.props;m.vnode=g,m.next=null,Ga(m,g.props,C,T),Ja(m,g.children,T),Xe(),ei(m),Qe()},X=(m,g,T,C,E,S,D,x,w=!1)=>{const A=m&&m.children,G=m?m.shapeFlag:0,b=g.children,{patchFlag:k,shapeFlag:H}=g;if(k>0){if(k&128){Ct(A,b,T,C,E,S,D,x,w);return}else if(k&256){Oe(A,b,T,C,E,S,D,x,w);return}}H&8?(G&16&&$(A,E,S),b!==A&&c(T,b)):G&16?H&16?Ct(A,b,T,C,E,S,D,x,w):$(A,E,S,!0):(G&8&&c(T,""),H&16&&te(b,T,C,E,S,D,x,w))},Oe=(m,g,T,C,E,S,D,x,w)=>{m=m||Jt,g=g||Jt;const A=m.length,G=g.length,b=Math.min(A,G);let k;for(k=0;k<b;k++){const H=g[k]=w?nt(g[k]):He(g[k]);v(m[k],H,T,null,E,S,D,x,w)}A>G?$(m,E,S,!0,!1,b):te(g,T,C,E,S,D,x,w,b)},Ct=(m,g,T,C,E,S,D,x,w)=>{let A=0;const G=g.length;let b=m.length-1,k=G-1;for(;A<=b&&A<=k;){const H=m[A],W=g[A]=w?nt(g[A]):He(g[A]);if(Gt(H,W))v(H,W,T,null,E,S,D,x,w);else break;A++}for(;A<=b&&A<=k;){const H=m[b],W=g[k]=w?nt(g[k]):He(g[k]);if(Gt(H,W))v(H,W,T,null,E,S,D,x,w);else break;b--,k--}if(A>b){if(A<=k){const H=k+1,W=H<G?g[H].el:C;for(;A<=k;)v(null,g[A]=w?nt(g[A]):He(g[A]),T,W,E,S,D,x,w),A++}}else if(A>k)for(;A<=b;)we(m[A],E,S,!0),A++;else{const H=A,W=A,ie=new Map;for(A=W;A<=k;A++){const Re=g[A]=w?nt(g[A]):He(g[A]);Re.key!=null&&ie.set(Re.key,A)}let ee,Ie=0;const Ae=k-W+1;let Le=!1,ke=0;const Ft=new Array(Ae);for(A=0;A<Ae;A++)Ft[A]=0;for(A=H;A<=b;A++){const Re=m[A];if(Ie>=Ae){we(Re,E,S,!0);continue}let Fe;if(Re.key!=null)Fe=ie.get(Re.key);else for(ee=W;ee<=k;ee++)if(Ft[ee-W]===0&&Gt(Re,g[ee])){Fe=ee;break}Fe===void 0?we(Re,E,S,!0):(Ft[Fe-W]=A+1,Fe>=ke?ke=Fe:Le=!0,v(Re,g[Fe],T,null,E,S,D,x,w),Ie++)}const Yo=Le?Ya(Ft):Jt;for(ee=Yo.length-1,A=Ae-1;A>=0;A--){const Re=W+A,Fe=g[Re],zo=g[Re+1],Xo=Re+1<G?zo.el||zo.placeholder:C;Ft[A]===0?v(null,Fe,T,Xo,E,S,D,x,w):Le&&(ee<0||A!==Yo[ee]?Ke(Fe,T,Xo,2):ee--)}}},Ke=(m,g,T,C,E=null)=>{const{el:S,type:D,transition:x,children:w,shapeFlag:A}=m;if(A&6){Ke(m.component.subTree,g,T,C);return}if(A&128){m.suspense.move(g,T,C);return}if(A&64){D.move(m,g,T,he);return}if(D===qe){o(S,g,T);for(let b=0;b<w.length;b++)Ke(w[b],g,T,C);o(m.anchor,g,T);return}if(D===mn){R(m,g,T);return}if(C!==2&&A&1&&x)if(C===0)x.beforeEnter(S),o(S,g,T),Me(()=>x.enter(S),E);else{const{leave:b,delayLeave:k,afterLeave:H}=x,W=()=>{m.ctx.isUnmounted?i(S):o(S,g,T)},ie=()=>{S._isLeaving&&S[ga](!0),b(S,()=>{W(),H&&H()})};k?k(S,W,ie):ie()}else o(S,g,T)},we=(m,g,T,C=!1,E=!1)=>{const{type:S,props:D,ref:x,children:w,dynamicChildren:A,shapeFlag:G,patchFlag:b,dirs:k,cacheIndex:H}=m;if(b===-2&&(E=!1),x!=null&&(Xe(),zt(x,null,T,m,!0),Qe()),H!=null&&(g.renderCache[H]=void 0),G&256){g.ctx.deactivate(m);return}const W=G&1&&k,ie=!Xt(m);let ee;if(ie&&(ee=D&&D.onVnodeBeforeUnmount)&&Ve(ee,g,m),G&6)K(m.component,T,C);else{if(G&128){m.suspense.unmount(T,C);return}W&&ft(m,null,g,"beforeUnmount"),G&64?m.type.remove(m,g,T,he,C):A&&!A.hasOnce&&(S!==qe||b>0&&b&64)?$(A,g,T,!1,!0):(S===qe&&b&384||!E&&G&16)&&$(w,g,T),C&&fn(m)}(ie&&(ee=D&&D.onVnodeUnmounted)||W)&&Me(()=>{ee&&Ve(ee,g,m),W&&ft(m,null,g,"unmounted")},T)},fn=m=>{const{type:g,el:T,anchor:C,transition:E}=m;if(g===qe){qn(T,C);return}if(g===mn){I(m);return}const S=()=>{i(T),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(m.shapeFlag&1&&E&&!E.persisted){const{leave:D,delayLeave:x}=E,w=()=>D(T,S);x?x(m.el,S,w):w()}else S()},qn=(m,g)=>{let T;for(;m!==g;)T=h(m),i(m),m=T;i(g)},K=(m,g,T)=>{const{bum:C,scope:E,job:S,subTree:D,um:x,m:w,a:A}=m;li(w),li(A),C&&Bn(C),E.stop(),S&&(S.flags|=8,we(D,m,g,T)),x&&Me(x,g),Me(()=>{m.isUnmounted=!0},g),__VUE_PROD_DEVTOOLS__&&da(m)},$=(m,g,T,C=!1,E=!1,S=0)=>{for(let D=S;D<m.length;D++)we(m[D],g,T,C,E)},ne=m=>{if(m.shapeFlag&6)return ne(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const g=h(m.anchor||m.el),T=g&&g[ha];return T?h(T):g};let ue=!1;const _e=(m,g,T)=>{m==null?g._vnode&&we(g._vnode,null,null,!0):v(g._vnode||null,m,g,null,null,null,T),g._vnode=m,ue||(ue=!0,ei(),fr(),ue=!1)},he={p:v,um:we,m:Ke,r:fn,mt:et,mc:te,pc:X,pbc:J,n:ne,o:t};return{render:_e,hydrate:void 0,createApp:ka(_e)}}function Wn({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function dt({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Wa(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Nr(t,e,n=!1){const o=t.children,i=e.children;if(B(o)&&B(i))for(let s=0;s<o.length;s++){const a=o[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=nt(i[s]),u.el=a.el),!n&&u.patchFlag!==-2&&Nr(a,u)),u.type===ln&&u.patchFlag!==-1&&(u.el=a.el),u.type===yt&&!u.el&&(u.el=a.el)}}function Ya(t){const e=t.slice(),n=[0];let o,i,s,a,u;const f=t.length;for(o=0;o<f;o++){const d=t[o];if(d!==0){if(i=n[n.length-1],t[i]<d){e[o]=i,n.push(o);continue}for(s=0,a=n.length-1;s<a;)u=s+a>>1,t[n[u]]<d?s=u+1:a=u;d<t[n[s]]&&(s>0&&(e[o]=n[s-1]),n[s]=o)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}function Dr(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Dr(e)}function li(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const za=Symbol.for("v-scx"),Xa=()=>hn(za);function Rt(t,e,n){return br(t,e,n)}function br(t,e,n=re){const{immediate:o,deep:i,flush:s,once:a}=n,u=Se({},n),f=e&&o||!e&&s!=="post";let d;if(on){if(s==="sync"){const y=Xa();d=y.__watcherHandles||(y.__watcherHandles=[])}else if(!f){const y=()=>{};return y.stop=Ne,y.resume=Ne,y.pause=Ne,y}}const c=Ee;u.call=(y,_,v)=>$e(y,c,_,v);let p=!1;s==="post"?u.scheduler=y=>{Me(y,c&&c.suspense)}:s!=="sync"&&(p=!0,u.scheduler=(y,_)=>{_?y():Uo(y)}),u.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,c&&(y.id=c.uid,y.i=c))};const h=na(t,e,u);return on&&(d?d.push(h):f&&h()),h}function Qa(t,e,n){const o=this.proxy,i=ce(t)?t.includes(".")?Ur(o,t):()=>o[t]:t.bind(o,o);let s;O(e)?s=e:(s=e.handler,n=e);const a=an(this),u=br(i,s.bind(o),n);return a(),u}function Ur(t,e){const n=e.split(".");return()=>{let o=t;for(let i=0;i<n.length&&o;i++)o=o[n[i]];return o}}const Za=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${lt(e)}Modifiers`]||t[`${Tt(e)}Modifiers`];function ja(t,e,...n){if(t.isUnmounted)return;const o=t.vnode.props||re;let i=n;const s=e.startsWith("update:"),a=s&&Za(o,e.slice(7));a&&(a.trim&&(i=n.map(c=>ce(c)?c.trim():c)),a.number&&(i=n.map(vl))),__VUE_PROD_DEVTOOLS__&&ca(t,e,i);let u,f=o[u=Hn(e)]||o[u=Hn(lt(e))];!f&&s&&(f=o[u=Hn(Tt(e))]),f&&$e(f,t,6,i);const d=o[u+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,$e(d,t,6,i)}}const eu=new WeakMap;function Lr(t,e,n=!1){const o=__VUE_OPTIONS_API__&&n?eu:e.emitsCache,i=o.get(t);if(i!==void 0)return i;const s=t.emits;let a={},u=!1;if(__VUE_OPTIONS_API__&&!O(t)){const f=d=>{const c=Lr(d,e,!0);c&&(u=!0,Se(a,c))};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!s&&!u?(de(t)&&o.set(t,null),null):(B(s)?s.forEach(f=>a[f]=null):Se(a,s),de(t)&&o.set(t,a),a)}function Ln(t,e){return!t||!wn(e)?!1:(e=e.slice(2).replace(/Once$/,""),Z(t,e[0].toLowerCase()+e.slice(1))||Z(t,Tt(e))||Z(t,e))}function ai(t){const{type:e,vnode:n,proxy:o,withProxy:i,propsOptions:[s],slots:a,attrs:u,emit:f,render:d,renderCache:c,props:p,data:h,setupState:y,ctx:_,inheritAttrs:v}=t,N=Sn(t);let P,M;try{if(n.shapeFlag&4){const I=i||o,U=I;P=He(d.call(U,I,c,p,y,h,_)),M=u}else{const I=e;P=He(I.length>1?I(p,{attrs:u,slots:a,emit:f}):I(p,null)),M=e.props?u:tu(u)}}catch(I){Dn(I,t,1),P=mt(yt)}let R=P;if(M&&v!==!1){const I=Object.keys(M),{shapeFlag:U}=R;I.length&&U&7&&(s&&I.some(Co)&&(M=nu(M,s)),R=Nt(R,M,!1,!0))}return n.dirs&&(R=Nt(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&ko(R,n.transition),P=R,Sn(N),P}const tu=t=>{let e;for(const n in t)(n==="class"||n==="style"||wn(n))&&((e||(e={}))[n]=t[n]);return e},nu=(t,e)=>{const n={};for(const o in t)(!Co(o)||!(o.slice(9)in e))&&(n[o]=t[o]);return n};function ou(t,e,n){const{props:o,children:i,component:s}=t,{props:a,children:u,patchFlag:f}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return o?ui(o,a,d):!!a;if(f&8){const c=e.dynamicProps;for(let p=0;p<c.length;p++){const h=c[p];if(a[h]!==o[h]&&!Ln(d,h))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:o===a?!1:o?a?ui(o,a,d):!0:!!a;return!1}function ui(t,e,n){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let i=0;i<o.length;i++){const s=o[i];if(e[s]!==t[s]&&!Ln(n,s))return!0}return!1}function iu({vnode:t,parent:e},n){for(;e;){const o=e.subTree;if(o.suspense&&o.suspense.activeBranch===t&&(o.el=t.el),o===t)(t=e.vnode).el=n,e=e.parent;else break}}const kr=t=>t.__isSuspense;function su(t,e){e&&e.pendingBranch?B(t)?e.effects.push(...t):e.effects.push(t):ra(t)}const qe=Symbol.for("v-fgt"),ln=Symbol.for("v-txt"),yt=Symbol.for("v-cmt"),mn=Symbol.for("v-stc");let it=null,Go=1;function fi(t,e=!1){Go+=t,t<0&&it&&e&&(it.hasOnce=!0)}function Fr(t){return t?t.__v_isVNode===!0:!1}function Gt(t,e){return t.type===e.type&&t.key===e.key}const Vr=({key:t})=>t??null,gn=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ce(t)||ye(t)||O(t)?{i:Je,r:t,k:e,f:!!n}:t:null);function ru(t,e=null,n=null,o=0,i=null,s=t===qe?0:1,a=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Vr(e),ref:e&&gn(e),scopeId:hr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Je};return u?(qo(f,n),s&128&&t.normalize(f)):n&&(f.shapeFlag|=ce(n)?8:16),Go>0&&!a&&it&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&it.push(f),f}const mt=lu;function lu(t,e=null,n=null,o=0,i=null,s=!1){if((!t||t===Ma)&&(t=yt),Fr(t)){const u=Nt(t,e,!0);return n&&qo(u,n),Go>0&&!s&&it&&(u.shapeFlag&6?it[it.indexOf(t)]=u:it.push(u)),u.patchFlag=-2,u}if(Tu(t)&&(t=t.__vccOpts),e){e=au(e);let{class:u,style:f}=e;u&&!ce(u)&&(e.class=Ao(u)),de(f)&&(bo(f)&&!B(f)&&(f=Se({},f)),e.style=Io(f))}const a=ce(t)?1:kr(t)?128:ma(t)?64:de(t)?4:O(t)?2:0;return ru(t,e,n,o,i,a,s,!0)}function au(t){return t?bo(t)||Ar(t)?Se({},t):t:null}function Nt(t,e,n=!1,o=!1){const{props:i,ref:s,patchFlag:a,children:u,transition:f}=t,d=e?fu(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Vr(d),ref:e&&e.ref?n&&s?B(s)?s.concat(gn(e)):[s,gn(e)]:gn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:f,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Nt(t.ssContent),ssFallback:t.ssFallback&&Nt(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return f&&o&&ko(c,f.clone(c)),c}function uu(t=" ",e=0){return mt(ln,null,t,e)}function He(t){return t==null||typeof t=="boolean"?mt(yt):B(t)?mt(qe,null,t.slice()):Fr(t)?nt(t):mt(ln,null,String(t))}function nt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Nt(t)}function qo(t,e){let n=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(B(e))n=16;else if(typeof e=="object")if(o&65){const i=e.default;i&&(i._c&&(i._d=!1),qo(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Ar(e)?e._ctx=Je:i===3&&Je&&(Je.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else O(e)?(e={default:e,_ctx:Je},n=32):(e=String(e),o&64?(n=16,e=[uu(e)]):n=8);t.children=e,t.shapeFlag|=n}function fu(...t){const e={};for(let n=0;n<t.length;n++){const o=t[n];for(const i in o)if(i==="class")e.class!==o.class&&(e.class=Ao([e.class,o.class]));else if(i==="style")e.style=Io([e.style,o.style]);else if(wn(i)){const s=e[i],a=o[i];a&&s!==a&&!(B(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=o[i])}return e}function Ve(t,e,n,o=null){$e(t,e,7,[n,o])}const du=Er();let cu=0;function pu(t,e,n){const o=t.type,i=(e?e.appContext:t.appContext)||du,s={uid:cu++,vnode:t,type:o,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Rl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Rr(o,i),emitsOptions:Lr(o,i),emit:null,emitted:null,propsDefaults:re,inheritAttrs:o.inheritAttrs,ctx:re,data:re,props:re,attrs:re,slots:re,refs:re,setupState:re,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ja.bind(null,s),t.ce&&t.ce(s),s}let Ee=null;const hu=()=>Ee||Je;let Pn,ao;{const t=pt(),e=(n,o)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(o),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};Pn=e("__VUE_INSTANCE_SETTERS__",n=>Ee=n),ao=e("__VUE_SSR_SETTERS__",n=>on=n)}const an=t=>{const e=Ee;return Pn(t),t.scope.on(),()=>{t.scope.off(),Pn(e)}},di=()=>{Ee&&Ee.scope.off(),Pn(null)};function Gr(t){return t.vnode.shapeFlag&4}let on=!1;function mu(t,e=!1,n=!1){e&&ao(e);const{props:o,children:i}=t.vnode,s=Gr(t);Va(t,o,s,e),Ba(t,i,n||e);const a=s?gu(t,e):void 0;return e&&ao(!1),a}function gu(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wa);const{setup:o}=n;if(o){Xe();const i=t.setupContext=o.length>1?_u(t):null,s=an(t),a=rn(o,t,0,[t.props,i]),u=$s(a);if(Qe(),s(),(u||t.sp)&&!Xt(t)&&mr(t),u){if(a.then(di,di),e)return a.then(f=>{ci(t,f)}).catch(f=>{Dn(f,t,0)});t.asyncDep=a}else ci(t,a)}else qr(t)}function ci(t,e,n){O(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:de(e)&&(__VUE_PROD_DEVTOOLS__&&(t.devtoolsRawSetupState=e),t.setupState=lr(e)),qr(t)}function qr(t,e,n){const o=t.type;if(t.render||(t.render=o.render||Ne),__VUE_OPTIONS_API__){const i=an(t);Xe();try{xa(t)}finally{Qe(),i()}}}const yu={get(t,e){return me(t,"get",""),t[e]}};function _u(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,yu),slots:t.slots,emit:t.emit,expose:e}}function Ho(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(lr(Yl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Qt)return Qt[n](t)},has(e,n){return n in e||n in Qt}})):t.proxy}function Tu(t){return O(t)&&"__vccOpts"in t}const vu=(t,e)=>ea(t,e,on),pi="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let uo;const hi=typeof window<"u"&&window.trustedTypes;if(hi)try{uo=hi.createPolicy("vue",{createHTML:t=>t})}catch{}const Hr=uo?t=>uo.createHTML(t):t=>t,Cu="http://www.w3.org/2000/svg",Eu="http://www.w3.org/1998/Math/MathML",Ye=typeof document<"u"?document:null,mi=Ye&&Ye.createElement("template"),Su={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,o)=>{const i=e==="svg"?Ye.createElementNS(Cu,t):e==="mathml"?Ye.createElementNS(Eu,t):n?Ye.createElement(t,{is:n}):Ye.createElement(t);return t==="select"&&o&&o.multiple!=null&&i.setAttribute("multiple",o.multiple),i},createText:t=>Ye.createTextNode(t),createComment:t=>Ye.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ye.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,o,i,s){const a=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{mi.innerHTML=Hr(o==="svg"?`<svg>${t}</svg>`:o==="mathml"?`<math>${t}</math>`:t);const u=mi.content;if(o==="svg"||o==="mathml"){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}e.insertBefore(u,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Iu=Symbol("_vtc");function Au(t,e,n){const o=t[Iu];o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const gi=Symbol("_vod"),Pu=Symbol("_vsh"),Ru=Symbol(""),Mu=/(?:^|;)\s*display\s*:/;function wu(t,e,n){const o=t.style,i=ce(n);let s=!1;if(n&&!i){if(e)if(ce(e))for(const a of e.split(";")){const u=a.slice(0,a.indexOf(":")).trim();n[u]==null&&yn(o,u,"")}else for(const a in e)n[a]==null&&yn(o,a,"");for(const a in n)a==="display"&&(s=!0),yn(o,a,n[a])}else if(i){if(e!==n){const a=o[Ru];a&&(n+=";"+a),o.cssText=n,s=Mu.test(n)}}else e&&t.removeAttribute("style");gi in t&&(t[gi]=s?o.display:"",t[Pu]&&(o.display="none"))}const yi=/\s*!important$/;function yn(t,e,n){if(B(n))n.forEach(o=>yn(t,e,o));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const o=xu(t,e);yi.test(n)?t.setProperty(Tt(o),n.replace(yi,""),"important"):t[o]=n}}const _i=["Webkit","Moz","ms"],Yn={};function xu(t,e){const n=Yn[e];if(n)return n;let o=lt(e);if(o!=="filter"&&o in t)return Yn[e]=o;o=Os(o);for(let i=0;i<_i.length;i++){const s=_i[i]+o;if(s in t)return Yn[e]=s}return e}const Ti="http://www.w3.org/1999/xlink";function vi(t,e,n,o,i,s=Pl(e)){o&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Ti,e.slice(6,e.length)):t.setAttributeNS(Ti,e,n):n==null||s&&!Ks(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Dt(n)?String(n):n)}function Ci(t,e,n,o,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Hr(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?t.getAttribute("value")||"":t.value,f=n==null?t.type==="checkbox"?"on":"":String(n);(u!==f||!("_value"in t))&&(t.value=f),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=Ks(n):n==null&&u==="string"?(n="",a=!0):u==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(i||e)}function Nu(t,e,n,o){t.addEventListener(e,n,o)}function Du(t,e,n,o){t.removeEventListener(e,n,o)}const Ei=Symbol("_vei");function bu(t,e,n,o,i=null){const s=t[Ei]||(t[Ei]={}),a=s[e];if(o&&a)a.value=o;else{const[u,f]=Uu(e);if(o){const d=s[e]=Fu(o,i);Nu(t,u,d,f)}else a&&(Du(t,u,a,f),s[e]=void 0)}}const Si=/(?:Once|Passive|Capture)$/;function Uu(t){let e;if(Si.test(t)){e={};let o;for(;o=t.match(Si);)t=t.slice(0,t.length-o[0].length),e[o[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Tt(t.slice(2)),e]}let zn=0;const Lu=Promise.resolve(),ku=()=>zn||(Lu.then(()=>zn=0),zn=Date.now());function Fu(t,e){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;$e(Vu(o,n.value),e,5,[o])};return n.value=t,n.attached=ku(),n}function Vu(t,e){if(B(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(o=>i=>!i._stopped&&o&&o(i))}else return e}const Ii=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Gu=(t,e,n,o,i,s)=>{const a=i==="svg";e==="class"?Au(t,o,a):e==="style"?wu(t,n,o):wn(e)?Co(e)||bu(t,e,n,o,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):qu(t,e,o,a))?(Ci(t,e,o),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&vi(t,e,o,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ce(o))?Ci(t,lt(e),o,s,e):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),vi(t,e,o,a))};function qu(t,e,n,o){if(o)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ii(e)&&O(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ii(e)&&ce(n)?!1:e in t}const Hu=Se({patchProp:Gu},Su);let Ai;function Bu(){return Ai||(Ai=Oa(Hu))}const Ju=((...t)=>{const e=Bu().createApp(...t),{mount:n}=e;return e.mount=o=>{const i=Ou(o);if(!i)return;const s=e._component;!O(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,$u(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e});function $u(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ou(t){return ce(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ku,Wu;function Yu(){return{geminiUrl:Ku,vertexUrl:Wu}}function zu(t,e,n,o){var i,s;if(!(t!=null&&t.baseUrl)){const a=Yu();return e?(i=a.vertexUrl)!==null&&i!==void 0?i:n:(s=a.geminiUrl)!==null&&s!==void 0?s:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vt{}function L(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function l(t,e,n){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const f=t[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const c=f[d];l(c,e.slice(s+1),n[d])}else for(const d of f)l(d,e.slice(s+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const f=t[u];l(f[0],e.slice(s+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],i=t[o];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function r(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const i=e[o];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(u=>r(u,e.slice(o+1),n)):n}else return n}else t=t[i]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Xu(t,e){for(const[n,o]of Object.entries(e)){const i=n.split("."),s=o.split("."),a=new Set;let u=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){u=f;break}if(u!==-1&&s.length>u)for(let f=u;f<s.length;f++){const d=s[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}fo(t,i,s,0,a)}}function fo(t,e,n,o,i){if(o>=e.length||typeof t!="object"||t===null)return;const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const f of u[a])fo(f,e,n,o+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(d=>!d.startsWith("_")&&!i.has(d)),f={};for(const d of u)f[d]=a[d];for(const[d,c]of Object.entries(f)){const p=[];for(const h of n.slice(o))h==="*"?p.push(d):p.push(h);l(a,p,c)}for(const d of u)delete a[d]}}else{const a=t;s in a&&fo(a[s],e,n,o+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bo(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qu(t){const e={},n=r(t,["operationName"]);n!=null&&l(e,["operationName"],n);const o=r(t,["resourceName"]);return o!=null&&l(e,["_url","resourceName"],o),e}function Zu(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const i=r(t,["done"]);i!=null&&l(e,["done"],i);const s=r(t,["error"]);s!=null&&l(e,["error"],s);const a=r(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],ef(a)),e}function ju(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const i=r(t,["done"]);i!=null&&l(e,["done"],i);const s=r(t,["error"]);s!=null&&l(e,["error"],s);const a=r(t,["response"]);return a!=null&&l(e,["response"],tf(a)),e}function ef(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>nf(a))),l(e,["generatedVideos"],s)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const i=r(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function tf(t){const e={},n=r(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>of(a))),l(e,["generatedVideos"],s)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const i=r(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function nf(t){const e={},n=r(t,["video"]);return n!=null&&l(e,["video"],lf(n)),e}function of(t){const e={},n=r(t,["_self"]);return n!=null&&l(e,["video"],af(n)),e}function sf(t){const e={},n=r(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function rf(t){const e={},n=r(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function lf(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["uri"],n);const o=r(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],Bo(o));const i=r(t,["encoding"]);return i!=null&&l(e,["mimeType"],i),e}function af(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],Bo(o));const i=r(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pi;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Pi||(Pi={}));var Ri;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ri||(Ri={}));var Mi;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Mi||(Mi={}));var st;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(st||(st={}));var wi;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(wi||(wi={}));var xi;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(xi||(xi={}));var Ni;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ni||(Ni={}));var Di;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Di||(Di={}));var bi;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(bi||(bi={}));var Ui;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ui||(Ui={}));var Li;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Li||(Li={}));var ki;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(ki||(ki={}));var Fi;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Fi||(Fi={}));var Vi;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Vi||(Vi={}));var Gi;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Gi||(Gi={}));var qi;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qi||(qi={}));var sn;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(sn||(sn={}));var Hi;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Hi||(Hi={}));var co;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(co||(co={}));var Bi;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Bi||(Bi={}));var Ji;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ji||(Ji={}));var $i;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})($i||($i={}));var Oi;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Oi||(Oi={}));var Ki;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ki||(Ki={}));var Wi;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Wi||(Wi={}));var Yi;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Yi||(Yi={}));var zi;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(zi||(zi={}));var Xi;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Xi||(Xi={}));var Qi;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Qi||(Qi={}));var Zi;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Zi||(Zi={}));var ji;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ji||(ji={}));var es;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(es||(es={}));var ts;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ts||(ts={}));var ns;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ns||(ns={}));var os;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(os||(os={}));var is;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(is||(is={}));var ss;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ss||(ss={}));var rs;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(rs||(rs={}));var ls;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(ls||(ls={}));var as;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(as||(as={}));var us;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(us||(us={}));var fs;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(fs||(fs={}));var ds;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ds||(ds={}));var cs;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(cs||(cs={}));var ps;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ps||(ps={}));var hs;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hs||(hs={}));var ms;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ms||(ms={}));var gs;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(gs||(gs={}));var It;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(It||(It={}));class po{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class qt{get text(){var e,n,o,i,s,a,u,f;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",c=!1;const p=[];for(const h of(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[y,_]of Object.entries(h))y!=="text"&&y!=="thought"&&(_!==null||_!==void 0)&&p.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;c=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?d:void 0}get data(){var e,n,o,i,s,a,u,f;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const c=[];for(const p of(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[h,y]of Object.entries(p))h!=="inlineData"&&(y!==null||y!==void 0)&&c.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,i,s,a,u,f;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,o,i,s,a,u,f,d;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((c==null?void 0:c.length)!==0)return(d=c==null?void 0:c[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,i,s,a,u,f,d;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((c==null?void 0:c.length)!==0)return(d=c==null?void 0:c[0])===null||d===void 0?void 0:d.output}}class ys{}class _s{}class uf{}class ff{}class df{}class cf{}class Ts{}class vs{}class Cs{}class pf{}class Rn{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const o=new Rn;let i;const s=e;return n?i=ju(s):i=Zu(s),Object.assign(o,i),o}}class Es{}class Ss{}class Is{}class hf{}class mf{}class gf{}class As{}class yf{get text(){var e,n,o;let i="",s=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&a.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,i+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,o;let i="";const s=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,f]of Object.entries(a))u!=="inlineData"&&f!==null&&s.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class _f{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Br(t,e){const n=Y(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Jr(t){return Array.isArray(t)?t.map(e=>Mn(e)):[Mn(t)]}function Mn(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function $r(t){const e=Mn(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Or(t){const e=Mn(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ps(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Kr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ps(e)):[Ps(t)]}function ho(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Rs(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Ms(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ge(t){if(t==null)throw new Error("ContentUnion is required");return ho(t)?t:{role:"user",parts:Kr(t)}}function Jo(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=ge(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=ge(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ge(n)):[ge(e)]}function xe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Rs(t)||Ms(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ge(t)]}const e=[],n=[],o=ho(t[0]);for(const i of t){const s=ho(i);if(s!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(Rs(i)||Ms(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return o||e.push({role:"user",parts:Kr(n)}),e}function Tf(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(st).includes(n[0].toUpperCase())?n[0].toUpperCase():st.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(st).includes(o.toUpperCase())?o.toUpperCase():st.TYPE_UNSPECIFIED})}}function Mt(t){const e={},n=["items"],o=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Tf(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(st).includes(u.toUpperCase())?u.toUpperCase():st.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Mt(u);else if(o.includes(a)){const f=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}f.push(Mt(d))}e[a]=f}else if(i.includes(a)){const f={};for(const[d,c]of Object.entries(u))f[d]=Mt(c);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=u}return e}function $o(t){return Mt(t)}function Oo(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ko(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function bt(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Mt(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Mt(e.response));return t}function Ut(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function vf(t,e,n,o=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function je(t,e){if(typeof e!="string")throw new Error("name must be a string");return vf(t,e,"cachedContents")}function Wr(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function at(t){return Bo(t)}function Cf(t){return t!=null&&typeof t=="object"&&"name"in t}function Ef(t){return t!=null&&typeof t=="object"&&"video"in t}function Sf(t){return t!=null&&typeof t=="object"&&"uri"in t}function Yr(t){var e;let n;if(Cf(t)&&(n=t.name),!(Sf(t)&&(n=t.uri,n===void 0))&&!(Ef(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function zr(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Xr(t){for(const e of["models","tunedModels","publisherModels"])if(If(t,e))return t[e];return[]}function If(t,e){return t!==null&&typeof t=="object"&&e in t}function Af(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Pf(t,e={}){const n=[],o=new Set;for(const i of t){const s=i.name;if(o.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);o.add(s);const a=Af(i,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Qr(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Rf(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Zr(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const f=a.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Lt(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function jr(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mf(t){const e={},n=r(t,["responsesFile"]);n!=null&&l(e,["fileName"],n);const o=r(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>sd(a))),l(e,["inlinedResponses"],s)}const i=r(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(e,["inlinedEmbedContentResponses"],s)}return e}function wf(t){const e={},n=r(t,["predictionsFormat"]);n!=null&&l(e,["format"],n);const o=r(t,["gcsDestination","outputUriPrefix"]);o!=null&&l(e,["gcsUri"],o);const i=r(t,["bigqueryDestination","outputUri"]);return i!=null&&l(e,["bigqueryUri"],i),e}function xf(t){const e={},n=r(t,["format"]);n!=null&&l(e,["predictionsFormat"],n);const o=r(t,["gcsUri"]);o!=null&&l(e,["gcsDestination","outputUriPrefix"],o);const i=r(t,["bigqueryUri"]);if(i!=null&&l(e,["bigqueryDestination","outputUri"],i),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(r(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function _n(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata","displayName"]);o!=null&&l(e,["displayName"],o);const i=r(t,["metadata","state"]);i!=null&&l(e,["state"],jr(i));const s=r(t,["metadata","createTime"]);s!=null&&l(e,["createTime"],s);const a=r(t,["metadata","endTime"]);a!=null&&l(e,["endTime"],a);const u=r(t,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);const f=r(t,["metadata","model"]);f!=null&&l(e,["model"],f);const d=r(t,["metadata","output"]);return d!=null&&l(e,["dest"],Mf(Zr(d))),e}function mo(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["displayName"]);o!=null&&l(e,["displayName"],o);const i=r(t,["state"]);i!=null&&l(e,["state"],jr(i));const s=r(t,["error"]);s!=null&&l(e,["error"],s);const a=r(t,["createTime"]);a!=null&&l(e,["createTime"],a);const u=r(t,["startTime"]);u!=null&&l(e,["startTime"],u);const f=r(t,["endTime"]);f!=null&&l(e,["endTime"],f);const d=r(t,["updateTime"]);d!=null&&l(e,["updateTime"],d);const c=r(t,["model"]);c!=null&&l(e,["model"],c);const p=r(t,["inputConfig"]);p!=null&&l(e,["src"],Nf(p));const h=r(t,["outputConfig"]);return h!=null&&l(e,["dest"],wf(Zr(h))),e}function Nf(t){const e={},n=r(t,["instancesFormat"]);n!=null&&l(e,["format"],n);const o=r(t,["gcsSource","uris"]);o!=null&&l(e,["gcsUri"],o);const i=r(t,["bigquerySource","inputUri"]);return i!=null&&l(e,["bigqueryUri"],i),e}function Df(t,e){const n={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=r(e,["fileName"]);o!=null&&l(n,["fileName"],o);const i=r(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>id(t,a))),l(n,["requests","requests"],s)}return n}function bf(t){const e={},n=r(t,["format"]);n!=null&&l(e,["instancesFormat"],n);const o=r(t,["gcsUri"]);o!=null&&l(e,["gcsSource","uris"],o);const i=r(t,["bigqueryUri"]);if(i!=null&&l(e,["bigquerySource","inputUri"],i),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Uf(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&l(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Lf(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Lt(t,o)),n}function kf(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Lt(t,o)),n}function Ff(t){const e={},n=r(t,["content"]);n!=null&&l(e,["content"],n);const o=r(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],Vf(o));const i=r(t,["tokenCount"]);i!=null&&l(e,["tokenCount"],i);const s=r(t,["finishReason"]);s!=null&&l(e,["finishReason"],s);const a=r(t,["urlContextMetadata"]);a!=null&&l(e,["urlContextMetadata"],a);const u=r(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const f=r(t,["groundingMetadata"]);f!=null&&l(e,["groundingMetadata"],f);const d=r(t,["index"]);d!=null&&l(e,["index"],d);const c=r(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const p=r(t,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>y)),l(e,["safetyRatings"],h)}return e}function Vf(t){const e={},n=r(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),l(e,["citations"],o)}return e}function el(t){const e={},n=r(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>cd(s))),l(e,["parts"],i)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function Gf(t,e){const n={},o=r(t,["displayName"]);if(e!==void 0&&o!=null&&l(e,["batch","displayName"],o),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function qf(t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const i=r(t,["dest"]);return e!==void 0&&i!=null&&l(e,["outputConfig"],xf(Rf(i))),n}function ws(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["src"]);i!=null&&l(n,["batch","inputConfig"],Df(t,Qr(t,i)));const s=r(e,["config"]);return s!=null&&Gf(s,n),n}function Hf(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["model"],Y(t,o));const i=r(e,["src"]);i!=null&&l(n,["inputConfig"],bf(Qr(t,i)));const s=r(e,["config"]);return s!=null&&qf(s,n),n}function Bf(t,e){const n={},o=r(t,["displayName"]);return e!==void 0&&o!=null&&l(e,["batch","displayName"],o),n}function Jf(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["src"]);i!=null&&l(n,["batch","inputConfig"],Xf(t,i));const s=r(e,["config"]);return s!=null&&Bf(s,n),n}function $f(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Lt(t,o)),n}function Of(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Lt(t,o)),n}function Kf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const i=r(t,["done"]);i!=null&&l(e,["done"],i);const s=r(t,["error"]);return s!=null&&l(e,["error"],s),e}function Wf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const i=r(t,["done"]);i!=null&&l(e,["done"],i);const s=r(t,["error"]);return s!=null&&l(e,["error"],s),e}function Yf(t,e){const n={},o=r(e,["contents"]);if(o!=null){let s=Jo(t,o);Array.isArray(s)&&(s=s.map(a=>a)),l(n,["requests[]","request","content"],s)}const i=r(e,["config"]);return i!=null&&(l(n,["_self"],zf(i,n)),Xu(n,{"requests[].*":"requests[].request.*"})),n}function zf(t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const i=r(t,["title"]);e!==void 0&&i!=null&&l(e,["requests[]","title"],i);const s=r(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&l(e,["requests[]","outputDimensionality"],s),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Xf(t,e){const n={},o=r(e,["fileName"]);o!=null&&l(n,["file_name"],o);const i=r(e,["inlinedRequests"]);return i!=null&&l(n,["requests"],Yf(t,i)),n}function Qf(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Zf(t,e,n){const o={},i=r(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],el(ge(i)));const s=r(e,["temperature"]);s!=null&&l(o,["temperature"],s);const a=r(e,["topP"]);a!=null&&l(o,["topP"],a);const u=r(e,["topK"]);u!=null&&l(o,["topK"],u);const f=r(e,["candidateCount"]);f!=null&&l(o,["candidateCount"],f);const d=r(e,["maxOutputTokens"]);d!=null&&l(o,["maxOutputTokens"],d);const c=r(e,["stopSequences"]);c!=null&&l(o,["stopSequences"],c);const p=r(e,["responseLogprobs"]);p!=null&&l(o,["responseLogprobs"],p);const h=r(e,["logprobs"]);h!=null&&l(o,["logprobs"],h);const y=r(e,["presencePenalty"]);y!=null&&l(o,["presencePenalty"],y);const _=r(e,["frequencyPenalty"]);_!=null&&l(o,["frequencyPenalty"],_);const v=r(e,["seed"]);v!=null&&l(o,["seed"],v);const N=r(e,["responseMimeType"]);N!=null&&l(o,["responseMimeType"],N);const P=r(e,["responseSchema"]);P!=null&&l(o,["responseSchema"],$o(P));const M=r(e,["responseJsonSchema"]);if(M!=null&&l(o,["responseJsonSchema"],M),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=r(e,["safetySettings"]);if(n!==void 0&&R!=null){let z=R;Array.isArray(z)&&(z=z.map(pe=>pd(pe))),l(n,["safetySettings"],z)}const I=r(e,["tools"]);if(n!==void 0&&I!=null){let z=Ut(I);Array.isArray(z)&&(z=z.map(pe=>hd(bt(pe)))),l(n,["tools"],z)}const U=r(e,["toolConfig"]);if(n!==void 0&&U!=null&&l(n,["toolConfig"],U),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=r(e,["cachedContent"]);n!==void 0&&q!=null&&l(n,["cachedContent"],je(t,q));const F=r(e,["responseModalities"]);F!=null&&l(o,["responseModalities"],F);const te=r(e,["mediaResolution"]);te!=null&&l(o,["mediaResolution"],te);const V=r(e,["speechConfig"]);if(V!=null&&l(o,["speechConfig"],Oo(V)),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=r(e,["thinkingConfig"]);J!=null&&l(o,["thinkingConfig"],J);const ae=r(e,["imageConfig"]);return ae!=null&&l(o,["imageConfig"],ae),o}function jf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>Ff(d))),l(e,["candidates"],f)}const i=r(t,["modelVersion"]);i!=null&&l(e,["modelVersion"],i);const s=r(t,["promptFeedback"]);s!=null&&l(e,["promptFeedback"],s);const a=r(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=r(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function ed(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Lt(t,o)),n}function td(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Lt(t,o)),n}function nd(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function od(t){const e={},n=r(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],n),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function id(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["request","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let u=xe(i);Array.isArray(u)&&(u=u.map(f=>el(f))),l(n,["request","contents"],u)}const s=r(e,["metadata"]);s!=null&&l(n,["metadata"],s);const a=r(e,["config"]);return a!=null&&l(n,["request","generationConfig"],Zf(t,a,r(n,["request"],{}))),n}function sd(t){const e={},n=r(t,["response"]);n!=null&&l(e,["response"],jf(n));const o=r(t,["error"]);return o!=null&&l(e,["error"],o),e}function rd(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const i=r(t,["pageToken"]);if(e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ld(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const i=r(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const s=r(t,["filter"]);return e!==void 0&&s!=null&&l(e,["_query","filter"],s),n}function ad(t){const e={},n=r(t,["config"]);return n!=null&&rd(n,e),e}function ud(t){const e={},n=r(t,["config"]);return n!=null&&ld(n,e),e}function fd(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const i=r(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>_n(a))),l(e,["batchJobs"],s)}return e}function dd(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const i=r(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>mo(a))),l(e,["batchJobs"],s)}return e}function cd(t){const e={},n=r(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],n);const o=r(t,["thought"]);o!=null&&l(e,["thought"],o);const i=r(t,["inlineData"]);i!=null&&l(e,["inlineData"],Uf(i));const s=r(t,["fileData"]);s!=null&&l(e,["fileData"],Qf(s));const a=r(t,["thoughtSignature"]);a!=null&&l(e,["thoughtSignature"],a);const u=r(t,["functionCall"]);u!=null&&l(e,["functionCall"],u);const f=r(t,["codeExecutionResult"]);f!=null&&l(e,["codeExecutionResult"],f);const d=r(t,["executableCode"]);d!=null&&l(e,["executableCode"],d);const c=r(t,["functionResponse"]);c!=null&&l(e,["functionResponse"],c);const p=r(t,["text"]);return p!=null&&l(e,["text"],p),e}function pd(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(t,["category"]);n!=null&&l(e,["category"],n);const o=r(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function hd(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>c)),l(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&l(e,["googleSearch"],od(o));const i=r(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],i),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(t,["googleMaps"]);s!=null&&l(e,["googleMaps"],nd(s));const a=r(t,["urlContext"]);a!=null&&l(e,["urlContext"],a);const u=r(t,["computerUse"]);u!=null&&l(e,["computerUse"],u);const f=r(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _t;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(_t||(_t={}));class un{constructor(e,n,o,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,i)}init(e,n,o){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class md extends vt{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new un(_t.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=ws(this.apiClient,e),o=n._url,i=L("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,f=u.requests,d=[];for(const c of f){const p=Object.assign({},c);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=h,p.request=y}d.push(p)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},i=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${i}`),o.dest===void 0){const s=this.getGcsUri(e),a=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?o.dest=`${s.slice(0,-6)}/dest`:o.dest=`${s}_dest_${i}`;else if(a)o.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Hf(this.apiClient,e);return u=L("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>mo(c))}else{const d=ws(this.apiClient,e);return u=L("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>_n(c))}}async createEmbeddingsInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jf(this.apiClient,e);return s=L("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),i.then(f=>_n(f))}}async get(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=td(this.apiClient,e);return u=L("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>mo(c))}else{const d=ed(this.apiClient,e);return u=L("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>_n(c))}}async cancel(e){var n,o,i,s;let a="",u={};if(this.apiClient.isVertexAI()){const f=kf(this.apiClient,e);a=L("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const f=Lf(this.apiClient,e);a=L("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=ud(e);return u=L("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=dd(c),h=new As;return Object.assign(h,p),h})}else{const d=ad(e);return u=L("batches",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=fd(c),h=new As;return Object.assign(h,p),h})}}async delete(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Of(this.apiClient,e);return u=L("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>Wf(c))}else{const d=$f(this.apiClient,e);return u=L("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>Kf(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gd(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&l(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function xs(t){const e={},n=r(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Fd(s))),l(e,["parts"],i)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function yd(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const i=r(t,["expireTime"]);e!==void 0&&i!=null&&l(e,["expireTime"],i);const s=r(t,["displayName"]);e!==void 0&&s!=null&&l(e,["displayName"],s);const a=r(t,["contents"]);if(e!==void 0&&a!=null){let c=xe(a);Array.isArray(c)&&(c=c.map(p=>xs(p))),l(e,["contents"],c)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],xs(ge(u)));const f=r(t,["tools"]);if(e!==void 0&&f!=null){let c=f;Array.isArray(c)&&(c=c.map(p=>Vd(p))),l(e,["tools"],c)}const d=r(t,["toolConfig"]);if(e!==void 0&&d!=null&&l(e,["toolConfig"],d),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function _d(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const i=r(t,["expireTime"]);e!==void 0&&i!=null&&l(e,["expireTime"],i);const s=r(t,["displayName"]);e!==void 0&&s!=null&&l(e,["displayName"],s);const a=r(t,["contents"]);if(e!==void 0&&a!=null){let p=xe(a);Array.isArray(p)&&(p=p.map(h=>h)),l(e,["contents"],p)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],ge(u));const f=r(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>Gd(h))),l(e,["tools"],p)}const d=r(t,["toolConfig"]);e!==void 0&&d!=null&&l(e,["toolConfig"],d);const c=r(t,["kmsKeyName"]);return e!==void 0&&c!=null&&l(e,["encryption_spec","kmsKeyName"],c),n}function Td(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["model"],Br(t,o));const i=r(e,["config"]);return i!=null&&yd(i,n),n}function vd(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["model"],Br(t,o));const i=r(e,["config"]);return i!=null&&_d(i,n),n}function Cd(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],je(t,o)),n}function Ed(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],je(t,o)),n}function Sd(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Id(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Ad(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Pd(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&l(e,["description"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const i=r(t,["parameters"]);i!=null&&l(e,["parameters"],i);const s=r(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const a=r(t,["response"]);a!=null&&l(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function Rd(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],je(t,o)),n}function Md(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],je(t,o)),n}function wd(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function xd(t){const e={},n=r(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],n),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nd(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const i=r(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function Dd(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const i=r(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function bd(t){const e={},n=r(t,["config"]);return n!=null&&Nd(n,e),e}function Ud(t){const e={},n=r(t,["config"]);return n!=null&&Dd(n,e),e}function Ld(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const i=r(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(e,["cachedContents"],s)}return e}function kd(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const i=r(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(e,["cachedContents"],s)}return e}function Fd(t){const e={},n=r(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],n);const o=r(t,["thought"]);o!=null&&l(e,["thought"],o);const i=r(t,["inlineData"]);i!=null&&l(e,["inlineData"],gd(i));const s=r(t,["fileData"]);s!=null&&l(e,["fileData"],Ad(s));const a=r(t,["thoughtSignature"]);a!=null&&l(e,["thoughtSignature"],a);const u=r(t,["functionCall"]);u!=null&&l(e,["functionCall"],u);const f=r(t,["codeExecutionResult"]);f!=null&&l(e,["codeExecutionResult"],f);const d=r(t,["executableCode"]);d!=null&&l(e,["executableCode"],d);const c=r(t,["functionResponse"]);c!=null&&l(e,["functionResponse"],c);const p=r(t,["text"]);return p!=null&&l(e,["text"],p),e}function Vd(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>c)),l(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&l(e,["googleSearch"],xd(o));const i=r(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],i),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(t,["googleMaps"]);s!=null&&l(e,["googleMaps"],wd(s));const a=r(t,["urlContext"]);a!=null&&l(e,["urlContext"],a);const u=r(t,["computerUse"]);u!=null&&l(e,["computerUse"],u);const f=r(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}function Gd(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>Pd(h))),l(e,["functionDeclarations"],p)}const o=r(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const i=r(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],i);const s=r(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const a=r(t,["enterpriseWebSearch"]);a!=null&&l(e,["enterpriseWebSearch"],a);const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],u);const f=r(t,["urlContext"]);f!=null&&l(e,["urlContext"],f);const d=r(t,["computerUse"]);d!=null&&l(e,["computerUse"],d);const c=r(t,["codeExecution"]);return c!=null&&l(e,["codeExecution"],c),e}function qd(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const i=r(t,["expireTime"]);return e!==void 0&&i!=null&&l(e,["expireTime"],i),n}function Hd(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const i=r(t,["expireTime"]);return e!==void 0&&i!=null&&l(e,["expireTime"],i),n}function Bd(t,e){const n={},o=r(e,["name"]);o!=null&&l(n,["_url","name"],je(t,o));const i=r(e,["config"]);return i!=null&&qd(i,n),n}function Jd(t,e){const n={},o=r(e,["name"]);o!=null&&l(n,["_url","name"],je(t,o));const i=r(e,["config"]);return i!=null&&Hd(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $d extends vt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new un(_t.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=vd(this.apiClient,e);return u=L("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const d=Td(this.apiClient,e);return u=L("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Md(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const d=Rd(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Ed(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Id(c),h=new Ss;return Object.assign(h,p),h})}else{const d=Cd(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Sd(c),h=new Ss;return Object.assign(h,p),h})}}async update(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Jd(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const d=Bd(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async listInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Ud(e);return u=L("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=kd(c),h=new Is;return Object.assign(h,p),h})}else{const d=bd(e);return u=L("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Ld(c),h=new Is;return Object.assign(h,p),h})}}}function Ns(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t){return this instanceof le?(this.v=t,this):new le(t)}function wt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(y){return function(_){return Promise.resolve(_).then(y,p)}}function u(y,_){o[y]&&(i[y]=function(v){return new Promise(function(N,P){s.push([y,v,N,P])>1||f(y,v)})},_&&(i[y]=_(i[y])))}function f(y,_){try{d(o[y](_))}catch(v){h(s[0][3],v)}}function d(y){y.value instanceof le?Promise.resolve(y.value.v).then(c,p):h(s[0][2],y)}function c(y){f("next",y)}function p(y){f("throw",y)}function h(y,_){y(_),s.shift(),s.length&&f(s[0][0],s[0][1])}}function Zt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ns=="function"?Ns(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(s){n[s]=t[s]&&function(a){return new Promise(function(u,f){a=t[s](a),i(u,f,a.done,a.value)})}}function i(s,a,u,f){Promise.resolve(f).then(function(d){s({value:d,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Od(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:tl(n)}function tl(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Kd(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ds(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const i=[];let s=!0;for(;o<n&&t[o].role==="model";)i.push(t[o]),s&&!tl(t[o])&&(s=!1),o++;s?e.push(...i):e.pop()}return e}class Wd{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Yd(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Yd{constructor(e,n,o,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Kd(s)}async sendMessage(e){var n;await this.sendPromise;const o=ge(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,u;const f=await i,d=(a=(s=f.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,c=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];c!=null&&(h=(u=c.slice(p))!==null&&u!==void 0?u:[]);const y=d?[d]:[];this.recordHistory(o,y,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const o=ge(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,o)}getHistory(e=!1){const n=e?Ds(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,i;return wt(this,arguments,function*(){var a,u,f,d;const c=[];try{for(var p=!0,h=Zt(e),y;y=yield le(h.next()),a=y.done,!a;p=!0){d=y.value,p=!1;const _=d;if(Od(_)){const v=(i=(o=_.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content;v!==void 0&&c.push(v)}yield yield le(_)}}catch(_){u={error:_}}finally{try{!p&&!a&&(f=h.return)&&(yield le(f.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,c)})}recordHistory(e,n,o){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Ds(o)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kn extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kn.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zd(t){const e={},n=r(t,["file"]);return n!=null&&l(e,["file"],n),e}function Xd(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Qd(t){const e={},n=r(t,["name"]);return n!=null&&l(e,["_url","file"],Yr(n)),e}function Zd(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function jd(t){const e={},n=r(t,["name"]);return n!=null&&l(e,["_url","file"],Yr(n)),e}function ec(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const i=r(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function tc(t){const e={},n=r(t,["config"]);return n!=null&&ec(n,e),e}function nc(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const i=r(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),l(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oc extends vt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new un(_t.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tc(e);return s=L("files",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),i.then(f=>{const d=nc(f),c=new hf;return Object.assign(c,d),c})}}async createInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zd(e);return s=L("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Xd(f),c=new mf;return Object.assign(c,d),c})}}async get(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jd(e);return s=L("files/{file}",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qd(e);return s=L("files/{file}",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),i.then(f=>{const d=Zd(f),c=new gf;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tn(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&l(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function ic(t){const e={},n=r(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Tc(s))),l(e,["parts"],i)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function sc(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function rc(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&l(e,["description"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const i=r(t,["parameters"]);i!=null&&l(e,["parameters"],i);const s=r(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const a=r(t,["response"]);a!=null&&l(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function lc(t){const e={},n=r(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=r(t,["audioTimestamp"]);o!=null&&l(e,["audioTimestamp"],o);const i=r(t,["candidateCount"]);i!=null&&l(e,["candidateCount"],i);const s=r(t,["enableAffectiveDialog"]);s!=null&&l(e,["enableAffectiveDialog"],s);const a=r(t,["frequencyPenalty"]);a!=null&&l(e,["frequencyPenalty"],a);const u=r(t,["logprobs"]);u!=null&&l(e,["logprobs"],u);const f=r(t,["maxOutputTokens"]);f!=null&&l(e,["maxOutputTokens"],f);const d=r(t,["mediaResolution"]);d!=null&&l(e,["mediaResolution"],d);const c=r(t,["presencePenalty"]);c!=null&&l(e,["presencePenalty"],c);const p=r(t,["responseJsonSchema"]);p!=null&&l(e,["responseJsonSchema"],p);const h=r(t,["responseLogprobs"]);h!=null&&l(e,["responseLogprobs"],h);const y=r(t,["responseMimeType"]);y!=null&&l(e,["responseMimeType"],y);const _=r(t,["responseModalities"]);_!=null&&l(e,["responseModalities"],_);const v=r(t,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);const N=r(t,["routingConfig"]);N!=null&&l(e,["routingConfig"],N);const P=r(t,["seed"]);P!=null&&l(e,["seed"],P);const M=r(t,["speechConfig"]);M!=null&&l(e,["speechConfig"],nl(M));const R=r(t,["stopSequences"]);R!=null&&l(e,["stopSequences"],R);const I=r(t,["temperature"]);I!=null&&l(e,["temperature"],I);const U=r(t,["thinkingConfig"]);U!=null&&l(e,["thinkingConfig"],U);const q=r(t,["topK"]);q!=null&&l(e,["topK"],q);const F=r(t,["topP"]);if(F!=null&&l(e,["topP"],F),r(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ac(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function uc(t){const e={},n=r(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],n),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function fc(t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const i=r(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const s=r(t,["temperature"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","temperature"],s);const a=r(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","maxOutputTokens"],f);const d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const c=r(t,["seed"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","seed"],c);const p=r(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],Ko(p));const h=r(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const y=r(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],y);const _=r(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],ic(ge(_)));const v=r(t,["tools"]);if(e!==void 0&&v!=null){let q=Ut(v);Array.isArray(q)&&(q=q.map(F=>Cc(bt(F)))),l(e,["setup","tools"],q)}const N=r(t,["sessionResumption"]);e!==void 0&&N!=null&&l(e,["setup","sessionResumption"],vc(N));const P=r(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&l(e,["setup","inputAudioTranscription"],P);const M=r(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&l(e,["setup","outputAudioTranscription"],M);const R=r(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&l(e,["setup","realtimeInputConfig"],R);const I=r(t,["contextWindowCompression"]);e!==void 0&&I!=null&&l(e,["setup","contextWindowCompression"],I);const U=r(t,["proactivity"]);return e!==void 0&&U!=null&&l(e,["setup","proactivity"],U),n}function dc(t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],lc(o));const i=r(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const s=r(t,["temperature"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","temperature"],s);const a=r(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","maxOutputTokens"],f);const d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const c=r(t,["seed"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","seed"],c);const p=r(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],nl(Ko(p)));const h=r(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const y=r(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],y);const _=r(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],ge(_));const v=r(t,["tools"]);if(e!==void 0&&v!=null){let q=Ut(v);Array.isArray(q)&&(q=q.map(F=>Ec(bt(F)))),l(e,["setup","tools"],q)}const N=r(t,["sessionResumption"]);e!==void 0&&N!=null&&l(e,["setup","sessionResumption"],N);const P=r(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&l(e,["setup","inputAudioTranscription"],P);const M=r(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&l(e,["setup","outputAudioTranscription"],M);const R=r(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&l(e,["setup","realtimeInputConfig"],R);const I=r(t,["contextWindowCompression"]);e!==void 0&&I!=null&&l(e,["setup","contextWindowCompression"],I);const U=r(t,["proactivity"]);return e!==void 0&&U!=null&&l(e,["setup","proactivity"],U),n}function cc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["setup","model"],Y(t,o));const i=r(e,["config"]);return i!=null&&l(n,["config"],fc(i,n)),n}function pc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["setup","model"],Y(t,o));const i=r(e,["config"]);return i!=null&&l(n,["config"],dc(i,n)),n}function hc(t){const e={},n=r(t,["musicGenerationConfig"]);return n!=null&&l(e,["musicGenerationConfig"],n),e}function mc(t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),l(e,["weightedPrompts"],o)}return e}function gc(t){const e={},n=r(t,["media"]);if(n!=null){let d=Jr(n);Array.isArray(d)&&(d=d.map(c=>Tn(c))),l(e,["mediaChunks"],d)}const o=r(t,["audio"]);o!=null&&l(e,["audio"],Tn(Or(o)));const i=r(t,["audioStreamEnd"]);i!=null&&l(e,["audioStreamEnd"],i);const s=r(t,["video"]);s!=null&&l(e,["video"],Tn($r(s)));const a=r(t,["text"]);a!=null&&l(e,["text"],a);const u=r(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const f=r(t,["activityEnd"]);return f!=null&&l(e,["activityEnd"],f),e}function yc(t){const e={},n=r(t,["media"]);if(n!=null){let d=Jr(n);Array.isArray(d)&&(d=d.map(c=>c)),l(e,["mediaChunks"],d)}const o=r(t,["audio"]);o!=null&&l(e,["audio"],Or(o));const i=r(t,["audioStreamEnd"]);i!=null&&l(e,["audioStreamEnd"],i);const s=r(t,["video"]);s!=null&&l(e,["video"],$r(s));const a=r(t,["text"]);a!=null&&l(e,["text"],a);const u=r(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const f=r(t,["activityEnd"]);return f!=null&&l(e,["activityEnd"],f),e}function _c(t){const e={},n=r(t,["setupComplete"]);n!=null&&l(e,["setupComplete"],n);const o=r(t,["serverContent"]);o!=null&&l(e,["serverContent"],o);const i=r(t,["toolCall"]);i!=null&&l(e,["toolCall"],i);const s=r(t,["toolCallCancellation"]);s!=null&&l(e,["toolCallCancellation"],s);const a=r(t,["usageMetadata"]);a!=null&&l(e,["usageMetadata"],Sc(a));const u=r(t,["goAway"]);u!=null&&l(e,["goAway"],u);const f=r(t,["sessionResumptionUpdate"]);return f!=null&&l(e,["sessionResumptionUpdate"],f),e}function Tc(t){const e={},n=r(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],n);const o=r(t,["thought"]);o!=null&&l(e,["thought"],o);const i=r(t,["inlineData"]);i!=null&&l(e,["inlineData"],Tn(i));const s=r(t,["fileData"]);s!=null&&l(e,["fileData"],sc(s));const a=r(t,["thoughtSignature"]);a!=null&&l(e,["thoughtSignature"],a);const u=r(t,["functionCall"]);u!=null&&l(e,["functionCall"],u);const f=r(t,["codeExecutionResult"]);f!=null&&l(e,["codeExecutionResult"],f);const d=r(t,["executableCode"]);d!=null&&l(e,["executableCode"],d);const c=r(t,["functionResponse"]);c!=null&&l(e,["functionResponse"],c);const p=r(t,["text"]);return p!=null&&l(e,["text"],p),e}function vc(t){const e={},n=r(t,["handle"]);if(n!=null&&l(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nl(t){const e={},n=r(t,["voiceConfig"]);if(n!=null&&l(e,["voiceConfig"],n),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&l(e,["languageCode"],o),e}function Cc(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>c)),l(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&l(e,["googleSearch"],uc(o));const i=r(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],i),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(t,["googleMaps"]);s!=null&&l(e,["googleMaps"],ac(s));const a=r(t,["urlContext"]);a!=null&&l(e,["urlContext"],a);const u=r(t,["computerUse"]);u!=null&&l(e,["computerUse"],u);const f=r(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}function Ec(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>rc(h))),l(e,["functionDeclarations"],p)}const o=r(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const i=r(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],i);const s=r(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const a=r(t,["enterpriseWebSearch"]);a!=null&&l(e,["enterpriseWebSearch"],a);const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],u);const f=r(t,["urlContext"]);f!=null&&l(e,["urlContext"],f);const d=r(t,["computerUse"]);d!=null&&l(e,["computerUse"],d);const c=r(t,["codeExecution"]);return c!=null&&l(e,["codeExecution"],c),e}function Sc(t){const e={},n=r(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const o=r(t,["cachedContentTokenCount"]);o!=null&&l(e,["cachedContentTokenCount"],o);const i=r(t,["candidatesTokenCount"]);i!=null&&l(e,["responseTokenCount"],i);const s=r(t,["toolUsePromptTokenCount"]);s!=null&&l(e,["toolUsePromptTokenCount"],s);const a=r(t,["thoughtsTokenCount"]);a!=null&&l(e,["thoughtsTokenCount"],a);const u=r(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const f=r(t,["promptTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(_=>_)),l(e,["promptTokensDetails"],y)}const d=r(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(_=>_)),l(e,["cacheTokensDetails"],y)}const c=r(t,["candidatesTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(_=>_)),l(e,["responseTokensDetails"],y)}const p=r(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>_)),l(e,["toolUsePromptTokensDetails"],y)}const h=r(t,["trafficType"]);return h!=null&&l(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ic(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&l(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Ac(t){const e={},n=r(t,["content"]);n!=null&&l(e,["content"],n);const o=r(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],Pc(o));const i=r(t,["tokenCount"]);i!=null&&l(e,["tokenCount"],i);const s=r(t,["finishReason"]);s!=null&&l(e,["finishReason"],s);const a=r(t,["urlContextMetadata"]);a!=null&&l(e,["urlContextMetadata"],a);const u=r(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const f=r(t,["groundingMetadata"]);f!=null&&l(e,["groundingMetadata"],f);const d=r(t,["index"]);d!=null&&l(e,["index"],d);const c=r(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const p=r(t,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>y)),l(e,["safetyRatings"],h)}return e}function Pc(t){const e={},n=r(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),l(e,["citations"],o)}return e}function Rc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let s=xe(i);Array.isArray(s)&&(s=s.map(a=>a)),l(n,["contents"],s)}return n}function Mc(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),l(e,["tokensInfo"],i)}return e}function wc(t){const e={},n=r(t,["values"]);n!=null&&l(e,["values"],n);const o=r(t,["statistics"]);return o!=null&&l(e,["statistics"],xc(o)),e}function xc(t){const e={},n=r(t,["truncated"]);n!=null&&l(e,["truncated"],n);const o=r(t,["token_count"]);return o!=null&&l(e,["tokenCount"],o),e}function Fn(t){const e={},n=r(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Lp(s))),l(e,["parts"],i)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function Nc(t){const e={},n=r(t,["controlType"]);n!=null&&l(e,["controlType"],n);const o=r(t,["enableControlImageComputation"]);return o!=null&&l(e,["computeControl"],o),e}function Dc(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function bc(t,e){const n={},o=r(t,["systemInstruction"]);e!==void 0&&o!=null&&l(e,["systemInstruction"],ge(o));const i=r(t,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ll(u))),l(e,["tools"],a)}const s=r(t,["generationConfig"]);return e!==void 0&&s!=null&&l(e,["generationConfig"],Ep(s)),n}function Uc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let a=xe(i);Array.isArray(a)&&(a=a.map(u=>Fn(u))),l(n,["contents"],a)}const s=r(e,["config"]);return s!=null&&Dc(s),n}function Lc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let a=xe(i);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const s=r(e,["config"]);return s!=null&&bc(s,n),n}function kc(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["totalTokens"]);o!=null&&l(e,["totalTokens"],o);const i=r(t,["cachedContentTokenCount"]);return i!=null&&l(e,["cachedContentTokenCount"],i),e}function Fc(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["totalTokens"]);return o!=null&&l(e,["totalTokens"],o),e}function Vc(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],Y(t,o)),n}function Gc(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],Y(t,o)),n}function qc(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Hc(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Bc(t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const i=r(t,["negativePrompt"]);e!==void 0&&i!=null&&l(e,["parameters","negativePrompt"],i);const s=r(t,["numberOfImages"]);e!==void 0&&s!=null&&l(e,["parameters","sampleCount"],s);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const f=r(t,["seed"]);e!==void 0&&f!=null&&l(e,["parameters","seed"],f);const d=r(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);const c=r(t,["personGeneration"]);e!==void 0&&c!=null&&l(e,["parameters","personGeneration"],c);const p=r(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const h=r(t,["includeRaiReason"]);e!==void 0&&h!=null&&l(e,["parameters","includeRaiReason"],h);const y=r(t,["language"]);e!==void 0&&y!=null&&l(e,["parameters","language"],y);const _=r(t,["outputMimeType"]);e!==void 0&&_!=null&&l(e,["parameters","outputOptions","mimeType"],_);const v=r(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);const N=r(t,["addWatermark"]);e!==void 0&&N!=null&&l(e,["parameters","addWatermark"],N);const P=r(t,["labels"]);e!==void 0&&P!=null&&l(e,["labels"],P);const M=r(t,["editMode"]);e!==void 0&&M!=null&&l(e,["parameters","editMode"],M);const R=r(t,["baseSteps"]);return e!==void 0&&R!=null&&l(e,["parameters","editConfig","baseSteps"],R),n}function Jc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const s=r(e,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>Hp(f))),l(n,["instances[0]","referenceImages"],u)}const a=r(e,["config"]);return a!=null&&Bc(a,n),n}function $c(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Vn(s))),l(e,["generatedImages"],i)}return e}function Oc(t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const i=r(t,["title"]);e!==void 0&&i!=null&&l(e,["requests[]","title"],i);const s=r(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&l(e,["requests[]","outputDimensionality"],s),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Kc(t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&l(e,["instances[]","task_type"],o);const i=r(t,["title"]);e!==void 0&&i!=null&&l(e,["instances[]","title"],i);const s=r(t,["outputDimensionality"]);e!==void 0&&s!=null&&l(e,["parameters","outputDimensionality"],s);const a=r(t,["mimeType"]);e!==void 0&&a!=null&&l(e,["instances[]","mimeType"],a);const u=r(t,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),n}function Wc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let u=Jo(t,i);Array.isArray(u)&&(u=u.map(f=>f)),l(n,["requests[]","content"],u)}const s=r(e,["config"]);s!=null&&Oc(s,n);const a=r(e,["model"]);return a!==void 0&&l(n,["requests[]","model"],Y(t,a)),n}function Yc(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let a=Jo(t,i);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["instances[]","content"],a)}const s=r(e,["config"]);return s!=null&&Kc(s,n),n}function zc(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),l(e,["embeddings"],s)}const i=r(t,["metadata"]);return i!=null&&l(e,["metadata"],i),e}function Xc(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>wc(a))),l(e,["embeddings"],s)}const i=r(t,["metadata"]);return i!=null&&l(e,["metadata"],i),e}function Qc(t){const e={},n=r(t,["endpoint"]);n!=null&&l(e,["name"],n);const o=r(t,["deployedModelId"]);return o!=null&&l(e,["deployedModelId"],o),e}function Zc(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function jc(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&l(e,["description"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const i=r(t,["parameters"]);i!=null&&l(e,["parameters"],i);const s=r(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const a=r(t,["response"]);a!=null&&l(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function ep(t,e,n){const o={},i=r(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],Fn(ge(i)));const s=r(e,["temperature"]);s!=null&&l(o,["temperature"],s);const a=r(e,["topP"]);a!=null&&l(o,["topP"],a);const u=r(e,["topK"]);u!=null&&l(o,["topK"],u);const f=r(e,["candidateCount"]);f!=null&&l(o,["candidateCount"],f);const d=r(e,["maxOutputTokens"]);d!=null&&l(o,["maxOutputTokens"],d);const c=r(e,["stopSequences"]);c!=null&&l(o,["stopSequences"],c);const p=r(e,["responseLogprobs"]);p!=null&&l(o,["responseLogprobs"],p);const h=r(e,["logprobs"]);h!=null&&l(o,["logprobs"],h);const y=r(e,["presencePenalty"]);y!=null&&l(o,["presencePenalty"],y);const _=r(e,["frequencyPenalty"]);_!=null&&l(o,["frequencyPenalty"],_);const v=r(e,["seed"]);v!=null&&l(o,["seed"],v);const N=r(e,["responseMimeType"]);N!=null&&l(o,["responseMimeType"],N);const P=r(e,["responseSchema"]);P!=null&&l(o,["responseSchema"],$o(P));const M=r(e,["responseJsonSchema"]);if(M!=null&&l(o,["responseJsonSchema"],M),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=r(e,["safetySettings"]);if(n!==void 0&&R!=null){let z=R;Array.isArray(z)&&(z=z.map(pe=>Bp(pe))),l(n,["safetySettings"],z)}const I=r(e,["tools"]);if(n!==void 0&&I!=null){let z=Ut(I);Array.isArray(z)&&(z=z.map(pe=>Yp(bt(pe)))),l(n,["tools"],z)}const U=r(e,["toolConfig"]);if(n!==void 0&&U!=null&&l(n,["toolConfig"],U),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=r(e,["cachedContent"]);n!==void 0&&q!=null&&l(n,["cachedContent"],je(t,q));const F=r(e,["responseModalities"]);F!=null&&l(o,["responseModalities"],F);const te=r(e,["mediaResolution"]);te!=null&&l(o,["mediaResolution"],te);const V=r(e,["speechConfig"]);if(V!=null&&l(o,["speechConfig"],Oo(V)),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=r(e,["thinkingConfig"]);J!=null&&l(o,["thinkingConfig"],J);const ae=r(e,["imageConfig"]);return ae!=null&&l(o,["imageConfig"],ae),o}function tp(t,e,n){const o={},i=r(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],ge(i));const s=r(e,["temperature"]);s!=null&&l(o,["temperature"],s);const a=r(e,["topP"]);a!=null&&l(o,["topP"],a);const u=r(e,["topK"]);u!=null&&l(o,["topK"],u);const f=r(e,["candidateCount"]);f!=null&&l(o,["candidateCount"],f);const d=r(e,["maxOutputTokens"]);d!=null&&l(o,["maxOutputTokens"],d);const c=r(e,["stopSequences"]);c!=null&&l(o,["stopSequences"],c);const p=r(e,["responseLogprobs"]);p!=null&&l(o,["responseLogprobs"],p);const h=r(e,["logprobs"]);h!=null&&l(o,["logprobs"],h);const y=r(e,["presencePenalty"]);y!=null&&l(o,["presencePenalty"],y);const _=r(e,["frequencyPenalty"]);_!=null&&l(o,["frequencyPenalty"],_);const v=r(e,["seed"]);v!=null&&l(o,["seed"],v);const N=r(e,["responseMimeType"]);N!=null&&l(o,["responseMimeType"],N);const P=r(e,["responseSchema"]);P!=null&&l(o,["responseSchema"],$o(P));const M=r(e,["responseJsonSchema"]);M!=null&&l(o,["responseJsonSchema"],M);const R=r(e,["routingConfig"]);R!=null&&l(o,["routingConfig"],R);const I=r(e,["modelSelectionConfig"]);I!=null&&l(o,["modelConfig"],I);const U=r(e,["safetySettings"]);if(n!==void 0&&U!=null){let oe=U;Array.isArray(oe)&&(oe=oe.map(j=>j)),l(n,["safetySettings"],oe)}const q=r(e,["tools"]);if(n!==void 0&&q!=null){let oe=Ut(q);Array.isArray(oe)&&(oe=oe.map(j=>ll(bt(j)))),l(n,["tools"],oe)}const F=r(e,["toolConfig"]);n!==void 0&&F!=null&&l(n,["toolConfig"],F);const te=r(e,["labels"]);n!==void 0&&te!=null&&l(n,["labels"],te);const V=r(e,["cachedContent"]);n!==void 0&&V!=null&&l(n,["cachedContent"],je(t,V));const J=r(e,["responseModalities"]);J!=null&&l(o,["responseModalities"],J);const ae=r(e,["mediaResolution"]);ae!=null&&l(o,["mediaResolution"],ae);const z=r(e,["speechConfig"]);z!=null&&l(o,["speechConfig"],rl(Oo(z)));const pe=r(e,["audioTimestamp"]);pe!=null&&l(o,["audioTimestamp"],pe);const et=r(e,["thinkingConfig"]);et!=null&&l(o,["thinkingConfig"],et);const ut=r(e,["imageConfig"]);return ut!=null&&l(o,["imageConfig"],ut),o}function bs(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let a=xe(i);Array.isArray(a)&&(a=a.map(u=>Fn(u))),l(n,["contents"],a)}const s=r(e,["config"]);return s!=null&&l(n,["generationConfig"],ep(t,s,n)),n}function Us(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["contents"]);if(i!=null){let a=xe(i);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const s=r(e,["config"]);return s!=null&&l(n,["generationConfig"],tp(t,s,n)),n}function Ls(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>Ac(d))),l(e,["candidates"],f)}const i=r(t,["modelVersion"]);i!=null&&l(e,["modelVersion"],i);const s=r(t,["promptFeedback"]);s!=null&&l(e,["promptFeedback"],s);const a=r(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=r(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function ks(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>c)),l(e,["candidates"],d)}const i=r(t,["createTime"]);i!=null&&l(e,["createTime"],i);const s=r(t,["modelVersion"]);s!=null&&l(e,["modelVersion"],s);const a=r(t,["promptFeedback"]);a!=null&&l(e,["promptFeedback"],a);const u=r(t,["responseId"]);u!=null&&l(e,["responseId"],u);const f=r(t,["usageMetadata"]);return f!=null&&l(e,["usageMetadata"],f),e}function np(t,e){const n={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=r(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const i=r(t,["aspectRatio"]);e!==void 0&&i!=null&&l(e,["parameters","aspectRatio"],i);const s=r(t,["guidanceScale"]);if(e!==void 0&&s!=null&&l(e,["parameters","guidanceScale"],s),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=r(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&l(e,["parameters","safetySetting"],a);const u=r(t,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);const f=r(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&l(e,["parameters","includeSafetyAttributes"],f);const d=r(t,["includeRaiReason"]);e!==void 0&&d!=null&&l(e,["parameters","includeRaiReason"],d);const c=r(t,["language"]);e!==void 0&&c!=null&&l(e,["parameters","language"],c);const p=r(t,["outputMimeType"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","mimeType"],p);const h=r(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&l(e,["parameters","outputOptions","compressionQuality"],h),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=r(t,["imageSize"]);if(e!==void 0&&y!=null&&l(e,["parameters","sampleImageSize"],y),r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function op(t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const i=r(t,["negativePrompt"]);e!==void 0&&i!=null&&l(e,["parameters","negativePrompt"],i);const s=r(t,["numberOfImages"]);e!==void 0&&s!=null&&l(e,["parameters","sampleCount"],s);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const f=r(t,["seed"]);e!==void 0&&f!=null&&l(e,["parameters","seed"],f);const d=r(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);const c=r(t,["personGeneration"]);e!==void 0&&c!=null&&l(e,["parameters","personGeneration"],c);const p=r(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const h=r(t,["includeRaiReason"]);e!==void 0&&h!=null&&l(e,["parameters","includeRaiReason"],h);const y=r(t,["language"]);e!==void 0&&y!=null&&l(e,["parameters","language"],y);const _=r(t,["outputMimeType"]);e!==void 0&&_!=null&&l(e,["parameters","outputOptions","mimeType"],_);const v=r(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);const N=r(t,["addWatermark"]);e!==void 0&&N!=null&&l(e,["parameters","addWatermark"],N);const P=r(t,["labels"]);e!==void 0&&P!=null&&l(e,["labels"],P);const M=r(t,["imageSize"]);e!==void 0&&M!=null&&l(e,["parameters","sampleImageSize"],M);const R=r(t,["enhancePrompt"]);return e!==void 0&&R!=null&&l(e,["parameters","enhancePrompt"],R),n}function ip(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const s=r(e,["config"]);return s!=null&&np(s,n),n}function sp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const s=r(e,["config"]);return s!=null&&op(s,n),n}function rp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>_p(a))),l(e,["generatedImages"],s)}const i=r(t,["positivePromptSafetyAttributes"]);return i!=null&&l(e,["positivePromptSafetyAttributes"],il(i)),e}function lp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Vn(a))),l(e,["generatedImages"],s)}const i=r(t,["positivePromptSafetyAttributes"]);return i!=null&&l(e,["positivePromptSafetyAttributes"],sl(i)),e}function ap(t,e){const n={},o=r(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=r(t,["durationSeconds"]);if(e!==void 0&&i!=null&&l(e,["parameters","durationSeconds"],i),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=r(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const a=r(t,["resolution"]);e!==void 0&&a!=null&&l(e,["parameters","resolution"],a);const u=r(t,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=r(t,["negativePrompt"]);e!==void 0&&f!=null&&l(e,["parameters","negativePrompt"],f);const d=r(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&l(e,["parameters","enhancePrompt"],d),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const c=r(t,["lastFrame"]);e!==void 0&&c!=null&&l(e,["instances[0]","lastFrame"],Gn(c));const p=r(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>lh(y))),l(e,["instances[0]","referenceImages"],h)}if(r(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function up(t,e){const n={},o=r(t,["numberOfVideos"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);const s=r(t,["fps"]);e!==void 0&&s!=null&&l(e,["parameters","fps"],s);const a=r(t,["durationSeconds"]);e!==void 0&&a!=null&&l(e,["parameters","durationSeconds"],a);const u=r(t,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);const f=r(t,["aspectRatio"]);e!==void 0&&f!=null&&l(e,["parameters","aspectRatio"],f);const d=r(t,["resolution"]);e!==void 0&&d!=null&&l(e,["parameters","resolution"],d);const c=r(t,["personGeneration"]);e!==void 0&&c!=null&&l(e,["parameters","personGeneration"],c);const p=r(t,["pubsubTopic"]);e!==void 0&&p!=null&&l(e,["parameters","pubsubTopic"],p);const h=r(t,["negativePrompt"]);e!==void 0&&h!=null&&l(e,["parameters","negativePrompt"],h);const y=r(t,["enhancePrompt"]);e!==void 0&&y!=null&&l(e,["parameters","enhancePrompt"],y);const _=r(t,["generateAudio"]);e!==void 0&&_!=null&&l(e,["parameters","generateAudio"],_);const v=r(t,["lastFrame"]);e!==void 0&&v!=null&&l(e,["instances[0]","lastFrame"],Ue(v));const N=r(t,["referenceImages"]);if(e!==void 0&&N!=null){let R=N;Array.isArray(R)&&(R=R.map(I=>ah(I))),l(e,["instances[0]","referenceImages"],R)}const P=r(t,["mask"]);e!==void 0&&P!=null&&l(e,["instances[0]","mask"],rh(P));const M=r(t,["compressionQuality"]);return e!==void 0&&M!=null&&l(e,["parameters","compressionQuality"],M),n}function fp(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const i=r(t,["done"]);i!=null&&l(e,["done"],i);const s=r(t,["error"]);s!=null&&l(e,["error"],s);const a=r(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],hp(a)),e}function dp(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const i=r(t,["done"]);i!=null&&l(e,["done"],i);const s=r(t,["error"]);s!=null&&l(e,["error"],s);const a=r(t,["response"]);return a!=null&&l(e,["response"],mp(a)),e}function cp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const s=r(e,["image"]);s!=null&&l(n,["instances[0]","image"],Gn(s));const a=r(e,["video"]);a!=null&&l(n,["instances[0]","video"],al(a));const u=r(e,["source"]);u!=null&&gp(u,n);const f=r(e,["config"]);return f!=null&&ap(f,n),n}function pp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const s=r(e,["image"]);s!=null&&l(n,["instances[0]","image"],Ue(s));const a=r(e,["video"]);a!=null&&l(n,["instances[0]","video"],ul(a));const u=r(e,["source"]);u!=null&&yp(u,n);const f=r(e,["config"]);return f!=null&&up(f,n),n}function hp(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>vp(a))),l(e,["generatedVideos"],s)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const i=r(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function mp(t){const e={},n=r(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Cp(a))),l(e,["generatedVideos"],s)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const i=r(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function gp(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const i=r(t,["image"]);e!==void 0&&i!=null&&l(e,["instances[0]","image"],Gn(i));const s=r(t,["video"]);return e!==void 0&&s!=null&&l(e,["instances[0]","video"],al(s)),n}function yp(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const i=r(t,["image"]);e!==void 0&&i!=null&&l(e,["instances[0]","image"],Ue(i));const s=r(t,["video"]);return e!==void 0&&s!=null&&l(e,["instances[0]","video"],ul(s)),n}function _p(t){const e={},n=r(t,["_self"]);n!=null&&l(e,["image"],Rp(n));const o=r(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const i=r(t,["_self"]);return i!=null&&l(e,["safetyAttributes"],il(i)),e}function Vn(t){const e={},n=r(t,["_self"]);n!=null&&l(e,["image"],ol(n));const o=r(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const i=r(t,["_self"]);i!=null&&l(e,["safetyAttributes"],sl(i));const s=r(t,["prompt"]);return s!=null&&l(e,["enhancedPrompt"],s),e}function Tp(t){const e={},n=r(t,["_self"]);n!=null&&l(e,["mask"],ol(n));const o=r(t,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),l(e,["labels"],i)}return e}function vp(t){const e={},n=r(t,["video"]);return n!=null&&l(e,["video"],ih(n)),e}function Cp(t){const e={},n=r(t,["_self"]);return n!=null&&l(e,["video"],sh(n)),e}function Ep(t){const e={},n=r(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=r(t,["audioTimestamp"]);o!=null&&l(e,["audioTimestamp"],o);const i=r(t,["candidateCount"]);i!=null&&l(e,["candidateCount"],i);const s=r(t,["enableAffectiveDialog"]);s!=null&&l(e,["enableAffectiveDialog"],s);const a=r(t,["frequencyPenalty"]);a!=null&&l(e,["frequencyPenalty"],a);const u=r(t,["logprobs"]);u!=null&&l(e,["logprobs"],u);const f=r(t,["maxOutputTokens"]);f!=null&&l(e,["maxOutputTokens"],f);const d=r(t,["mediaResolution"]);d!=null&&l(e,["mediaResolution"],d);const c=r(t,["presencePenalty"]);c!=null&&l(e,["presencePenalty"],c);const p=r(t,["responseJsonSchema"]);p!=null&&l(e,["responseJsonSchema"],p);const h=r(t,["responseLogprobs"]);h!=null&&l(e,["responseLogprobs"],h);const y=r(t,["responseMimeType"]);y!=null&&l(e,["responseMimeType"],y);const _=r(t,["responseModalities"]);_!=null&&l(e,["responseModalities"],_);const v=r(t,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);const N=r(t,["routingConfig"]);N!=null&&l(e,["routingConfig"],N);const P=r(t,["seed"]);P!=null&&l(e,["seed"],P);const M=r(t,["speechConfig"]);M!=null&&l(e,["speechConfig"],rl(M));const R=r(t,["stopSequences"]);R!=null&&l(e,["stopSequences"],R);const I=r(t,["temperature"]);I!=null&&l(e,["temperature"],I);const U=r(t,["thinkingConfig"]);U!=null&&l(e,["thinkingConfig"],U);const q=r(t,["topK"]);q!=null&&l(e,["topK"],q);const F=r(t,["topP"]);if(F!=null&&l(e,["topP"],F),r(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sp(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],Y(t,o)),n}function Ip(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],Y(t,o)),n}function Ap(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Pp(t){const e={},n=r(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],n),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Rp(t){const e={},n=r(t,["bytesBase64Encoded"]);n!=null&&l(e,["imageBytes"],at(n));const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function ol(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&l(e,["imageBytes"],at(o));const i=r(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Gn(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(t,["imageBytes"]);n!=null&&l(e,["bytesBase64Encoded"],at(n));const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Ue(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=r(t,["imageBytes"]);o!=null&&l(e,["bytesBase64Encoded"],at(o));const i=r(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Mp(t,e,n){const o={},i=r(e,["pageSize"]);n!==void 0&&i!=null&&l(n,["_query","pageSize"],i);const s=r(e,["pageToken"]);n!==void 0&&s!=null&&l(n,["_query","pageToken"],s);const a=r(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],zr(t,u)),o}function wp(t,e,n){const o={},i=r(e,["pageSize"]);n!==void 0&&i!=null&&l(n,["_query","pageSize"],i);const s=r(e,["pageToken"]);n!==void 0&&s!=null&&l(n,["_query","pageToken"],s);const a=r(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],zr(t,u)),o}function xp(t,e){const n={},o=r(e,["config"]);return o!=null&&Mp(t,o,n),n}function Np(t,e){const n={},o=r(e,["config"]);return o!=null&&wp(t,o,n),n}function Dp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const i=r(t,["_self"]);if(i!=null){let s=Xr(i);Array.isArray(s)&&(s=s.map(a=>go(a))),l(e,["models"],s)}return e}function bp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const i=r(t,["_self"]);if(i!=null){let s=Xr(i);Array.isArray(s)&&(s=s.map(a=>yo(a))),l(e,["models"],s)}return e}function Up(t){const e={},n=r(t,["maskMode"]);n!=null&&l(e,["maskMode"],n);const o=r(t,["segmentationClasses"]);o!=null&&l(e,["maskClasses"],o);const i=r(t,["maskDilation"]);return i!=null&&l(e,["dilation"],i),e}function go(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["displayName"]);o!=null&&l(e,["displayName"],o);const i=r(t,["description"]);i!=null&&l(e,["description"],i);const s=r(t,["version"]);s!=null&&l(e,["version"],s);const a=r(t,["_self"]);a!=null&&l(e,["tunedModelInfo"],zp(a));const u=r(t,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);const f=r(t,["outputTokenLimit"]);f!=null&&l(e,["outputTokenLimit"],f);const d=r(t,["supportedGenerationMethods"]);return d!=null&&l(e,["supportedActions"],d),e}function yo(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["displayName"]);o!=null&&l(e,["displayName"],o);const i=r(t,["description"]);i!=null&&l(e,["description"],i);const s=r(t,["versionId"]);s!=null&&l(e,["version"],s);const a=r(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(h=>Qc(h))),l(e,["endpoints"],p)}const u=r(t,["labels"]);u!=null&&l(e,["labels"],u);const f=r(t,["_self"]);f!=null&&l(e,["tunedModelInfo"],Xp(f));const d=r(t,["defaultCheckpointId"]);d!=null&&l(e,["defaultCheckpointId"],d);const c=r(t,["checkpoints"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>h)),l(e,["checkpoints"],p)}return e}function Lp(t){const e={},n=r(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],n);const o=r(t,["thought"]);o!=null&&l(e,["thought"],o);const i=r(t,["inlineData"]);i!=null&&l(e,["inlineData"],Ic(i));const s=r(t,["fileData"]);s!=null&&l(e,["fileData"],Zc(s));const a=r(t,["thoughtSignature"]);a!=null&&l(e,["thoughtSignature"],a);const u=r(t,["functionCall"]);u!=null&&l(e,["functionCall"],u);const f=r(t,["codeExecutionResult"]);f!=null&&l(e,["codeExecutionResult"],f);const d=r(t,["executableCode"]);d!=null&&l(e,["executableCode"],d);const c=r(t,["functionResponse"]);c!=null&&l(e,["functionResponse"],c);const p=r(t,["text"]);return p!=null&&l(e,["text"],p),e}function kp(t){const e={},n=r(t,["productImage"]);return n!=null&&l(e,["image"],Ue(n)),e}function Fp(t,e){const n={},o=r(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const i=r(t,["baseSteps"]);e!==void 0&&i!=null&&l(e,["parameters","editConfig","baseSteps"],i);const s=r(t,["outputGcsUri"]);e!==void 0&&s!=null&&l(e,["parameters","storageUri"],s);const a=r(t,["seed"]);e!==void 0&&a!=null&&l(e,["parameters","seed"],a);const u=r(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);const f=r(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const d=r(t,["addWatermark"]);e!==void 0&&d!=null&&l(e,["parameters","addWatermark"],d);const c=r(t,["outputMimeType"]);e!==void 0&&c!=null&&l(e,["parameters","outputOptions","mimeType"],c);const p=r(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p);const h=r(t,["enhancePrompt"]);e!==void 0&&h!=null&&l(e,["parameters","enhancePrompt"],h);const y=r(t,["labels"]);return e!==void 0&&y!=null&&l(e,["labels"],y),n}function Vp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["source"]);i!=null&&qp(i,n);const s=r(e,["config"]);return s!=null&&Fp(s,n),n}function Gp(t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Vn(i))),l(e,["generatedImages"],o)}return e}function qp(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const i=r(t,["personImage"]);e!==void 0&&i!=null&&l(e,["instances[0]","personImage","image"],Ue(i));const s=r(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>kp(u))),l(e,["instances[0]","productImages"],a)}return n}function Hp(t){const e={},n=r(t,["referenceImage"]);n!=null&&l(e,["referenceImage"],Ue(n));const o=r(t,["referenceId"]);o!=null&&l(e,["referenceId"],o);const i=r(t,["referenceType"]);i!=null&&l(e,["referenceType"],i);const s=r(t,["maskImageConfig"]);s!=null&&l(e,["maskImageConfig"],Up(s));const a=r(t,["controlImageConfig"]);a!=null&&l(e,["controlImageConfig"],Nc(a));const u=r(t,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],u);const f=r(t,["subjectImageConfig"]);return f!=null&&l(e,["subjectImageConfig"],f),e}function il(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=r(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const i=r(t,["contentType"]);return i!=null&&l(e,["contentType"],i),e}function sl(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=r(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const i=r(t,["contentType"]);return i!=null&&l(e,["contentType"],i),e}function Bp(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(t,["category"]);n!=null&&l(e,["category"],n);const o=r(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function Jp(t){const e={},n=r(t,["image"]);return n!=null&&l(e,["image"],Ue(n)),e}function $p(t,e){const n={},o=r(t,["mode"]);e!==void 0&&o!=null&&l(e,["parameters","mode"],o);const i=r(t,["maxPredictions"]);e!==void 0&&i!=null&&l(e,["parameters","maxPredictions"],i);const s=r(t,["confidenceThreshold"]);e!==void 0&&s!=null&&l(e,["parameters","confidenceThreshold"],s);const a=r(t,["maskDilation"]);e!==void 0&&a!=null&&l(e,["parameters","maskDilation"],a);const u=r(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u);const f=r(t,["labels"]);return e!==void 0&&f!=null&&l(e,["labels"],f),n}function Op(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["source"]);i!=null&&Wp(i,n);const s=r(e,["config"]);return s!=null&&$p(s,n),n}function Kp(t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Tp(i))),l(e,["generatedMasks"],o)}return e}function Wp(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const i=r(t,["image"]);e!==void 0&&i!=null&&l(e,["instances[0]","image"],Ue(i));const s=r(t,["scribbleImage"]);return e!==void 0&&s!=null&&l(e,["instances[0]","scribble"],Jp(s)),n}function rl(t){const e={},n=r(t,["voiceConfig"]);if(n!=null&&l(e,["voiceConfig"],n),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&l(e,["languageCode"],o),e}function Yp(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>c)),l(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&l(e,["googleSearch"],Pp(o));const i=r(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],i),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(t,["googleMaps"]);s!=null&&l(e,["googleMaps"],Ap(s));const a=r(t,["urlContext"]);a!=null&&l(e,["urlContext"],a);const u=r(t,["computerUse"]);u!=null&&l(e,["computerUse"],u);const f=r(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}function ll(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>jc(h))),l(e,["functionDeclarations"],p)}const o=r(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const i=r(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],i);const s=r(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const a=r(t,["enterpriseWebSearch"]);a!=null&&l(e,["enterpriseWebSearch"],a);const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],u);const f=r(t,["urlContext"]);f!=null&&l(e,["urlContext"],f);const d=r(t,["computerUse"]);d!=null&&l(e,["computerUse"],d);const c=r(t,["codeExecution"]);return c!=null&&l(e,["codeExecution"],c),e}function zp(t){const e={},n=r(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const o=r(t,["createTime"]);o!=null&&l(e,["createTime"],o);const i=r(t,["updateTime"]);return i!=null&&l(e,["updateTime"],i),e}function Xp(t){const e={},n=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&l(e,["baseModel"],n);const o=r(t,["createTime"]);o!=null&&l(e,["createTime"],o);const i=r(t,["updateTime"]);return i!=null&&l(e,["updateTime"],i),e}function Qp(t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const i=r(t,["description"]);e!==void 0&&i!=null&&l(e,["description"],i);const s=r(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&l(e,["defaultCheckpointId"],s),n}function Zp(t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const i=r(t,["description"]);e!==void 0&&i!=null&&l(e,["description"],i);const s=r(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&l(e,["defaultCheckpointId"],s),n}function jp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","name"],Y(t,o));const i=r(e,["config"]);return i!=null&&Qp(i,n),n}function eh(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["config"]);return i!=null&&Zp(i,n),n}function th(t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const i=r(t,["includeRaiReason"]);e!==void 0&&i!=null&&l(e,["parameters","includeRaiReason"],i);const s=r(t,["outputMimeType"]);e!==void 0&&s!=null&&l(e,["parameters","outputOptions","mimeType"],s);const a=r(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&l(e,["parameters","outputOptions","compressionQuality"],a);const u=r(t,["enhanceInputImage"]);e!==void 0&&u!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=r(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=r(t,["labels"]);e!==void 0&&d!=null&&l(e,["labels"],d);const c=r(t,["numberOfImages"]);e!==void 0&&c!=null&&l(e,["parameters","sampleCount"],c);const p=r(t,["mode"]);return e!==void 0&&p!=null&&l(e,["parameters","mode"],p),n}function nh(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],Y(t,o));const i=r(e,["image"]);i!=null&&l(n,["instances[0]","image"],Ue(i));const s=r(e,["upscaleFactor"]);s!=null&&l(n,["parameters","upscaleConfig","upscaleFactor"],s);const a=r(e,["config"]);return a!=null&&th(a,n),n}function oh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Vn(s))),l(e,["generatedImages"],i)}return e}function ih(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["uri"],n);const o=r(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],at(o));const i=r(t,["encoding"]);return i!=null&&l(e,["mimeType"],i),e}function sh(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],at(o));const i=r(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function rh(t){const e={},n=r(t,["image"]);n!=null&&l(e,["_self"],Ue(n));const o=r(t,["maskMode"]);return o!=null&&l(e,["maskMode"],o),e}function lh(t){const e={},n=r(t,["image"]);n!=null&&l(e,["image"],Gn(n));const o=r(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function ah(t){const e={},n=r(t,["image"]);n!=null&&l(e,["image"],Ue(n));const o=r(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function al(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["uri"],n);const o=r(t,["videoBytes"]);o!=null&&l(e,["encodedVideo"],at(o));const i=r(t,["mimeType"]);return i!=null&&l(e,["encoding"],i),e}function ul(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["gcsUri"],n);const o=r(t,["videoBytes"]);o!=null&&l(e,["bytesBase64Encoded"],at(o));const i=r(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uh="Content-Type",fh="X-Server-Timeout",dh="User-Agent",_o="x-goog-api-client",ch="1.27.0",ph=`google-genai-sdk/${ch}`,hh="v1beta1",mh="v1beta",Fs=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class gh{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:hh,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:mh,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const i=[this.getRequestUrlInternal(n)];return o&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))i.searchParams.append(a,String(u));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?o[i]=Object.assign(Object.assign({},o[i]),s):s!==void 0&&(o[i]=s);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,o);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,i){if(n&&n.timeout||i){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&yh(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await Vs(i),new po(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await Vs(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return wt(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:f}=yield le(i.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(f,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),y=h.status,_=h.code,v=`got status: ${y}. ${JSON.stringify(p)}`;if(_>=400&&_<600)throw new kn({message:v,status:_})}}catch(p){if(p.name==="ApiError")throw p}a+=d;let c=a.match(Fs);for(;c;){const p=c[1];try{const h=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield le(new po(h)),a=a.slice(c[0].length),c=a.match(Fs)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=ph+" "+this.clientOptions.userAgentExtra;return e[dh]=n,e[_o]=n,e[uh]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))o.append(i,s);e.timeout&&e.timeout>0&&o.append(fh,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}async uploadFile(e,n){var o;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);i.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const f=await this.fetchUploadUrl(i,n);return s.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var o;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},a=await this.request({path:L("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Vs(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(o);throw n>=400&&n<600?new kn({message:i,status:n}):new Error(i)}}function yh(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(s,a){const u=Object.assign({},s);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const d=a[f],c=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&c&&typeof c=="object"&&!Array.isArray(c)?u[f]=o(c,d):(c&&d&&typeof c!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof c}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const i=o(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _h="mcp_used/unknown";let Th=!1;function fl(t){for(const e of t)if(vh(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Th}function dl(t){var e;const n=(e=t[_o])!==null&&e!==void 0?e:"";t[_o]=(n+` ${_h}`).trimStart()}function vh(t){return t!==null&&typeof t=="object"&&t instanceof Wo}function Ch(t,e=100){return wt(this,arguments,function*(){let o,i=0;for(;i<e;){const s=yield le(t.listTools({cursor:o}));for(const a of s.tools)yield yield le(a),i++;if(!s.nextCursor)break;o=s.nextCursor}})}class Wo{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Wo(e,n)}async initialize(){var e,n,o,i;if(this.mcpTools.length>0)return;const s={},a=[];for(const c of this.mcpClients)try{for(var u=!0,f=(n=void 0,Zt(Ch(c))),d;d=await f.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const p=i;a.push(p);const h=p.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=c}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=f.return)&&await o.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Pf(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[o.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await i.callTool({name:o.name,arguments:o.args},void 0,s);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Eh(t,e,n){const o=new _f;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(o,i),e(o)}class Sh{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=Ph(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const c=new Promise(R=>{d=R}),p=e.callbacks,h=function(){d({})},y=this.apiClient,_={onopen:h,onmessage:R=>{Eh(y,p.onmessage,R)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(R){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(R){}},v=this.webSocketFactory.create(f,Ah(a),_);v.connect(),await c;const M={setup:{model:Y(this.apiClient,e.model)}};return v.send(JSON.stringify(M)),new Ih(v,this.apiClient)}}class Ih{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=mc(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=hc(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(It.PLAY)}pause(){this.sendPlaybackControl(It.PAUSE)}stop(){this.sendPlaybackControl(It.STOP)}resetContext(){this.sendPlaybackControl(It.RESET_CONTEXT)}close(){this.conn.close()}}function Ah(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Ph(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rh="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Mh(t,e,n){const o=new yf;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const a=_c(s);Object.assign(o,a)}else Object.assign(o,s);e(o)}class wh{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Sh(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,i,s,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let c;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&fl(e.config.tools)&&dl(p);const h=bh(p);if(this.apiClient.isVertexAI())c=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,c);else{const V=this.apiClient.getApiKey();let J="BidiGenerateContent",ae="key";V!=null&&V.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),J="BidiGenerateContentConstrained",ae="access_token"),c=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${J}?${ae}=${V}`}let y=()=>{};const _=new Promise(V=>{y=V}),v=e.callbacks,N=function(){var V;(V=v==null?void 0:v.onopen)===null||V===void 0||V.call(v),y({})},P=this.apiClient,M={onopen:N,onmessage:V=>{Mh(P,v.onmessage,V)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(V){},onclose:(o=v==null?void 0:v.onclose)!==null&&o!==void 0?o:function(V){}},R=this.webSocketFactory.create(c,Dh(h),M);R.connect(),await _;let I=Y(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const V=this.apiClient.getProject(),J=this.apiClient.getLocation();I=`projects/${V}/locations/${J}/`+I}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[sn.AUDIO]}:e.config.responseModalities=[sn.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],F=[];for(const V of q)if(this.isCallableTool(V)){const J=V;F.push(await J.tool())}else F.push(V);F.length>0&&(e.config.tools=F);const te={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=pc(this.apiClient,te):U=cc(this.apiClient,te),delete U.config,R.send(JSON.stringify(U)),new Nh(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const xh={turnComplete:!0};class Nh{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=xe(n.turns),e.isVertexAI()||(o=o.map(i=>Fn(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const s of o){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Rh)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},xh),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:yc(e)}:n={realtimeInput:gc(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Dh(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function bh(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gs=10;function qs(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(xt(a)){i=!0;break}if(!i)return!0;const s=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function xt(t){return"callTool"in t&&typeof t.callTool=="function"}function Uh(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>xt(i)))!==null&&o!==void 0?o:!1}function Lh(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!xt(i)))!==null&&o!==void 0?o:!1}function Hs(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kh extends vt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,i,s,a,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Uh(n)||qs(n.config))return await this.generateContentInternal(f);if(Lh(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,c;const p=xe(f.contents),h=(s=(i=(o=f.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Gs;let y=0;for(;y<h&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const _=d.candidates[0].content,v=[];for(const N of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(xt(N)){const M=await N.callTool(d.functionCalls);v.push(...M)}y++,c={role:"user",parts:v},f.contents=xe(f.contents),f.contents.push(_),f.contents.push(c),Hs(f.config)&&(p.push(_),p.push(c))}return Hs(f.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),qs(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var i;let s;const a=[];if(o!=null&&o.generatedImages)for(const f of o.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=f==null?void 0:f.safetyAttributes:a.push(f);let u;return s?u={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new un(_t.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var o,i,s,a,u,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((f=(u=n.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const a=await Promise.all(s.map(async f=>xt(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&fl(e.config.tools)){const f=(i=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),dl(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,o,i;const s=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(xt(a)){const u=a,f=await u.tool();for(const d of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,u)}}return s}async processAfcStream(e){var n,o,i;const s=(i=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Gs;let a=!1,u=0;const f=await this.initAfcToolsMap(e);return(function(d,c,p){var h,y;return wt(this,arguments,function*(){for(var _,v,N,P;u<s;){a&&(u++,a=!1);const U=yield le(d.processParamsMaybeAddMcpUsage(p)),q=yield le(d.generateContentStreamInternal(U)),F=[],te=[];try{for(var M=!0,R=(v=void 0,Zt(q)),I;I=yield le(R.next()),_=I.done,!_;M=!0){P=I.value,M=!1;const V=P;if(yield yield le(V),V.candidates&&(!((h=V.candidates[0])===null||h===void 0)&&h.content)){te.push(V.candidates[0].content);for(const J of(y=V.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<s&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(J.functionCall.name)){const ae=yield le(c.get(J.functionCall.name).callTool([J.functionCall]));F.push(...ae)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(V){v={error:V}}finally{try{!M&&!_&&(N=R.return)&&(yield le(N.call(R)))}finally{if(v)throw v.error}}if(F.length>0){a=!0;const V=new qt;V.candidates=[{content:{role:"user",parts:F}}],yield yield le(V);const J=[];J.push(...te),J.push({role:"user",parts:F});const ae=xe(p.contents).concat(J);p.contents=ae}else break}})})(this,f,e)}async generateContentInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Us(this.apiClient,e);return u=L("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=ks(c),h=new qt;return Object.assign(h,p),h})}else{const d=bs(this.apiClient,e);return u=L("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Ls(c),h=new qt;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Us(this.apiClient,e);return u=L("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return wt(this,arguments,function*(){var h,y,_,v;try{for(var N=!0,P=Zt(p),M;M=yield le(P.next()),h=M.done,!h;N=!0){v=M.value,N=!1;const R=v,I=ks(yield le(R.json()));I.sdkHttpResponse={headers:R.headers};const U=new qt;Object.assign(U,I),yield yield le(U)}}catch(R){y={error:R}}finally{try{!N&&!h&&(_=P.return)&&(yield le(_.call(P)))}finally{if(y)throw y.error}}})})}else{const d=bs(this.apiClient,e);return u=L("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(p){return wt(this,arguments,function*(){var h,y,_,v;try{for(var N=!0,P=Zt(p),M;M=yield le(P.next()),h=M.done,!h;N=!0){v=M.value,N=!1;const R=v,I=Ls(yield le(R.json()));I.sdkHttpResponse={headers:R.headers};const U=new qt;Object.assign(U,I),yield yield le(U)}}catch(R){y={error:R}}finally{try{!N&&!h&&(_=P.return)&&(yield le(_.call(P)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Yc(this.apiClient,e);return u=L("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Xc(c),h=new ys;return Object.assign(h,p),h})}else{const d=Wc(this.apiClient,e);return u=L("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=zc(c),h=new ys;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=sp(this.apiClient,e);return u=L("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=lp(c),h=new _s;return Object.assign(h,p),h})}else{const d=ip(this.apiClient,e);return u=L("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=rp(c),h=new _s;return Object.assign(h,p),h})}}async editImageInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Jc(this.apiClient,e);return s=L("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),i.then(f=>{const d=$c(f),c=new uf;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=nh(this.apiClient,e);return s=L("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),i.then(f=>{const d=oh(f),c=new ff;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Vp(this.apiClient,e);return s=L("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Gp(f),c=new df;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Op(this.apiClient,e);return s=L("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Kp(f),c=new cf;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Ip(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>yo(c))}else{const d=Sp(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>go(c))}}async listInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Np(this.apiClient,e);return u=L("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=bp(c),h=new Ts;return Object.assign(h,p),h})}else{const d=xp(this.apiClient,e);return u=L("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Dp(c),h=new Ts;return Object.assign(h,p),h})}}async update(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=eh(this.apiClient,e);return u=L("{model}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>yo(c))}else{const d=jp(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>go(c))}}async delete(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Gc(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Hc(c),h=new vs;return Object.assign(h,p),h})}else{const d=Vc(this.apiClient,e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=qc(c),h=new vs;return Object.assign(h,p),h})}}async countTokens(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Lc(this.apiClient,e);return u=L("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=Fc(c),h=new Cs;return Object.assign(h,p),h})}else{const d=Uc(this.apiClient,e);return u=L("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=kc(c),h=new Cs;return Object.assign(h,p),h})}}async computeTokens(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Rc(this.apiClient,e);return s=L("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),i.then(f=>{const d=Mc(f),c=new pf;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=pp(this.apiClient,e);return u=L("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>{const p=dp(c),h=new Rn;return Object.assign(h,p),h})}else{const d=cp(this.apiClient,e);return u=L("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const p=fp(c),h=new Rn;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fh extends vt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;o&&"httpOptions"in o&&(s=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;o&&"httpOptions"in o&&(s=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=rf(e);return u=L("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a}else{const d=sf(e);return u=L("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=Qu(e);return s=L("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vh(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&l(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Gh(t){const e={},n=r(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Wh(s))),l(e,["parts"],i)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function qh(t,e,n){const o={},i=r(e,["expireTime"]);n!==void 0&&i!=null&&l(n,["expireTime"],i);const s=r(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&l(n,["newSessionExpireTime"],s);const a=r(e,["uses"]);n!==void 0&&a!=null&&l(n,["uses"],a);const u=r(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],Kh(t,u));const f=r(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&l(n,["fieldMask"],f),o}function Hh(t,e){const n={},o=r(e,["config"]);return o!=null&&l(n,["config"],qh(t,o,n)),n}function Bh(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Jh(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function $h(t){const e={},n=r(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],n),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Oh(t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const i=r(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const s=r(t,["temperature"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","temperature"],s);const a=r(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","maxOutputTokens"],f);const d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const c=r(t,["seed"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","seed"],c);const p=r(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],Ko(p));const h=r(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const y=r(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],y);const _=r(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],Gh(ge(_)));const v=r(t,["tools"]);if(e!==void 0&&v!=null){let q=Ut(v);Array.isArray(q)&&(q=q.map(F=>zh(bt(F)))),l(e,["setup","tools"],q)}const N=r(t,["sessionResumption"]);e!==void 0&&N!=null&&l(e,["setup","sessionResumption"],Yh(N));const P=r(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&l(e,["setup","inputAudioTranscription"],P);const M=r(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&l(e,["setup","outputAudioTranscription"],M);const R=r(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&l(e,["setup","realtimeInputConfig"],R);const I=r(t,["contextWindowCompression"]);e!==void 0&&I!=null&&l(e,["setup","contextWindowCompression"],I);const U=r(t,["proactivity"]);return e!==void 0&&U!=null&&l(e,["setup","proactivity"],U),n}function Kh(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["setup","model"],Y(t,o));const i=r(e,["config"]);return i!=null&&l(n,["config"],Oh(i,n)),n}function Wh(t){const e={},n=r(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],n);const o=r(t,["thought"]);o!=null&&l(e,["thought"],o);const i=r(t,["inlineData"]);i!=null&&l(e,["inlineData"],Vh(i));const s=r(t,["fileData"]);s!=null&&l(e,["fileData"],Bh(s));const a=r(t,["thoughtSignature"]);a!=null&&l(e,["thoughtSignature"],a);const u=r(t,["functionCall"]);u!=null&&l(e,["functionCall"],u);const f=r(t,["codeExecutionResult"]);f!=null&&l(e,["codeExecutionResult"],f);const d=r(t,["executableCode"]);d!=null&&l(e,["executableCode"],d);const c=r(t,["functionResponse"]);c!=null&&l(e,["functionResponse"],c);const p=r(t,["text"]);return p!=null&&l(e,["text"],p),e}function Yh(t){const e={},n=r(t,["handle"]);if(n!=null&&l(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zh(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>c)),l(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&l(e,["googleSearch"],$h(o));const i=r(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],i),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=r(t,["googleMaps"]);s!=null&&l(e,["googleMaps"],Jh(s));const a=r(t,["urlContext"]);a!=null&&l(e,["urlContext"],a);const u=r(t,["computerUse"]);u!=null&&l(e,["computerUse"],u);const f=r(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xh(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const i=Object.keys(o).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function Qh(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const s=o.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=Xh(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>a.includes(d)?`generationConfig.${d}`:d));const f=[];s&&f.push(s),u.length>0&&f.push(...u),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Zh extends vt{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Hh(this.apiClient,e);s=L("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=Qh(u,e.config);return i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jh(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function em(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function tm(t,e,n){const o={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=r(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&l(e,["displayName"],i),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=r(t,["epochCount"]);e!==void 0&&s!=null&&l(e,["tuningTask","hyperparameters","epochCount"],s);const a=r(t,["learningRateMultiplier"]);if(a!=null&&l(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=r(t,["batchSize"]);e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","batchSize"],u);const f=r(t,["learningRate"]);if(e!==void 0&&f!=null&&l(e,["tuningTask","hyperparameters","learningRate"],f),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return o}function nm(t,e,n){const o={},i=r(t,["validationDataset"]);e!==void 0&&i!=null&&l(e,["supervisedTuningSpec"],ym(i));const s=r(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&l(e,["tunedModelDisplayName"],s);const a=r(t,["description"]);e!==void 0&&a!=null&&l(e,["description"],a);const u=r(t,["epochCount"]);e!==void 0&&u!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=r(t,["learningRateMultiplier"]);e!==void 0&&f!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const d=r(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=r(t,["adapterSize"]);if(e!==void 0&&c!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=r(t,["labels"]);return e!==void 0&&p!=null&&l(e,["labels"],p),o}function om(t,e){const n={},o=r(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const i=r(t,["preTunedModel"]);i!=null&&l(n,["preTunedModel"],i);const s=r(t,["trainingDataset"]);s!=null&&l(n,["tuningTask","trainingData"],hm(s));const a=r(t,["config"]);return a!=null&&tm(a,n),n}function im(t,e){const n={},o=r(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const i=r(t,["preTunedModel"]);i!=null&&l(n,["preTunedModel"],i);const s=r(t,["trainingDataset"]);s!=null&&mm(s,n);const a=r(t,["config"]);return a!=null&&nm(a,n),n}function sm(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function rm(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function lm(t,e,n){const o={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&l(e,["_query","pageToken"],s);const a=r(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function am(t,e,n){const o={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&l(e,["_query","pageToken"],s);const a=r(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function um(t,e){const n={},o=r(t,["config"]);return o!=null&&lm(o,n),n}function fm(t,e){const n={},o=r(t,["config"]);return o!=null&&am(o,n),n}function dm(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(t,["nextPageToken"]);i!=null&&l(n,["nextPageToken"],i);const s=r(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>cl(u))),l(n,["tuningJobs"],a)}return n}function cm(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(t,["nextPageToken"]);i!=null&&l(n,["nextPageToken"],i);const s=r(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>To(u))),l(n,["tuningJobs"],a)}return n}function pm(t,e){const n={},o=r(t,["name"]);o!=null&&l(n,["model"],o);const i=r(t,["name"]);return i!=null&&l(n,["endpoint"],i),n}function hm(t,e){const n={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=r(t,["examples"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),l(n,["examples","examples"],i)}return n}function mm(t,e,n){const o={},i=r(t,["gcsUri"]);e!==void 0&&i!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=r(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],s),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function cl(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(t,["name"]);i!=null&&l(n,["name"],i);const s=r(t,["state"]);s!=null&&l(n,["state"],Wr(s));const a=r(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=r(t,["tuningTask","startTime"]);u!=null&&l(n,["startTime"],u);const f=r(t,["tuningTask","completeTime"]);f!=null&&l(n,["endTime"],f);const d=r(t,["updateTime"]);d!=null&&l(n,["updateTime"],d);const c=r(t,["description"]);c!=null&&l(n,["description"],c);const p=r(t,["baseModel"]);p!=null&&l(n,["baseModel"],p);const h=r(t,["_self"]);return h!=null&&l(n,["tunedModel"],pm(h)),n}function To(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(t,["name"]);i!=null&&l(n,["name"],i);const s=r(t,["state"]);s!=null&&l(n,["state"],Wr(s));const a=r(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=r(t,["startTime"]);u!=null&&l(n,["startTime"],u);const f=r(t,["endTime"]);f!=null&&l(n,["endTime"],f);const d=r(t,["updateTime"]);d!=null&&l(n,["updateTime"],d);const c=r(t,["error"]);c!=null&&l(n,["error"],c);const p=r(t,["description"]);p!=null&&l(n,["description"],p);const h=r(t,["baseModel"]);h!=null&&l(n,["baseModel"],h);const y=r(t,["tunedModel"]);y!=null&&l(n,["tunedModel"],y);const _=r(t,["preTunedModel"]);_!=null&&l(n,["preTunedModel"],_);const v=r(t,["supervisedTuningSpec"]);v!=null&&l(n,["supervisedTuningSpec"],v);const N=r(t,["tuningDataStats"]);N!=null&&l(n,["tuningDataStats"],N);const P=r(t,["encryptionSpec"]);P!=null&&l(n,["encryptionSpec"],P);const M=r(t,["partnerModelTuningSpec"]);M!=null&&l(n,["partnerModelTuningSpec"],M);const R=r(t,["customBaseModel"]);R!=null&&l(n,["customBaseModel"],R);const I=r(t,["experiment"]);I!=null&&l(n,["experiment"],I);const U=r(t,["labels"]);U!=null&&l(n,["labels"],U);const q=r(t,["outputUri"]);q!=null&&l(n,["outputUri"],q);const F=r(t,["pipelineJob"]);F!=null&&l(n,["pipelineJob"],F);const te=r(t,["serviceAccount"]);te!=null&&l(n,["serviceAccount"],te);const V=r(t,["tunedModelDisplayName"]);V!=null&&l(n,["tunedModelDisplayName"],V);const J=r(t,["veoTuningSpec"]);return J!=null&&l(n,["veoTuningSpec"],J),n}function gm(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const i=r(t,["name"]);i!=null&&l(n,["name"],i);const s=r(t,["metadata"]);s!=null&&l(n,["metadata"],s);const a=r(t,["done"]);a!=null&&l(n,["done"],a);const u=r(t,["error"]);return u!=null&&l(n,["error"],u),n}function ym(t,e){const n={},o=r(t,["gcsUri"]);o!=null&&l(n,["validationDatasetUri"],o);const i=r(t,["vertexDatasetResource"]);return i!=null&&l(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _m extends vt{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new un(_t.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:co.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=rm(e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>To(c))}else{const d=sm(e);return u=L("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>cl(c))}}async listInternal(e){var n,o,i,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=fm(e);return u=L("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=cm(c),h=new Es;return Object.assign(h,p),h})}else{const d=um(e);return u=L("tunedModels",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const p=dm(c),h=new Es;return Object.assign(h,p),h})}}async cancel(e){var n,o,i,s;let a="",u={};if(this.apiClient.isVertexAI()){const f=em(e);a=L("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const f=jh(e);a=L("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const u=im(e);return s=L("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),i.then(f=>To(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let i,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=om(e);return s=L("tunedModels",u._url),a=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),i.then(f=>gm(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tm{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const vm=1024*1024*8,Cm=3,Em=1e3,Sm=2,Xn="x-goog-upload-status";async function Im(t,e,n){var o,i,s;let a=0,u=0,f=new po(new Response),d="upload";for(a=t.size;u<a;){const p=Math.min(vm,a-u),h=t.slice(u,u+p);u+p>=a&&(d+=", finalize");let y=0,_=Em;for(;y<Cm&&(f=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=f==null?void 0:f.headers)===null||o===void 0)&&o[Xn]));)y++,await Pm(_),_=_*Sm;if(u+=p,((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[Xn])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const c=await(f==null?void 0:f.json());if(((s=f==null?void 0:f.headers)===null||s===void 0?void 0:s[Xn])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function Am(t){return{size:t.size,type:t.type}}function Pm(t){return new Promise(e=>setTimeout(e,t))}class Rm{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Im(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Am(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mm{create(e,n,o){return new wm(e,n,o)}}class wm{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bs="x-goog-api-key";class xm{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Bs)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Bs,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nm="gl-node/";class Dm{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=zu(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const i=new xm(this.apiKey);this.apiClient=new gh({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Nm+"web",uploader:new Rm,downloader:new Tm}),this.models=new kh(this.apiClient),this.live=new wh(this.apiClient,i,new Mm),this.batches=new md(this.apiClient),this.chats=new Wd(this.models,this.apiClient),this.caches=new $d(this.apiClient),this.files=new oc(this.apiClient),this.operations=new Fh(this.apiClient),this.authTokens=new Zh(this.apiClient),this.tunings=new _m(this.apiClient)}}const bm=async t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{if(typeof o.result!="string")return n(new Error("Failed to read file as data URL."));const[i,s]=o.result.split(","),a=i.split(":")[1].split(";")[0];if(!s)return n(new Error("Could not extract base64 data from file."));e({mimeType:a,data:s})},o.onerror=i=>n(i),o.readAsDataURL(t)}),Um=async(t,e,n)=>{var u,f,d;if(!e)throw new Error("Gemini API key not provided.");const o=new Dm({apiKey:e}),i=[{text:t}];if(n){const{mimeType:c,data:p}=await bm(n);i.unshift({inlineData:{data:p,mimeType:c}})}const s=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:i},config:{responseModalities:[sn.IMAGE]}});if(!s.candidates||s.candidates.length===0){let c="Image generation failed. The API returned no content.";throw(u=s.promptFeedback)!=null&&u.blockReason&&(c+=`
Reason: Request was blocked for ${s.promptFeedback.blockReason}.`,s.promptFeedback.blockReasonMessage&&(c+=` ${s.promptFeedback.blockReasonMessage}`)),console.error("Invalid response from Gemini API (no candidates):",JSON.stringify(s,null,2)),new Error(c)}const a=(d=(f=s.candidates[0])==null?void 0:f.content)==null?void 0:d.parts;if(a){for(const c of a)if(c.inlineData){const{data:p,mimeType:h}=c.inlineData;return`data:${h};base64,${p}`}}throw s.text?new Error(`Image generation failed. The model responded with text: "${s.text}"`):(console.error("Invalid response from Gemini API:",JSON.stringify(s,null,2)),new Error("Failed to generate image. The API response was in an unexpected format."))},Lm={template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM5.44 4.06a.75.75 0 01.92.24l.8 1.38a.75.75 0 11-1.3 0l-.8-1.38a.75.75 0 01.38-1.16zm9.12 0a.75.75 0 01.38 1.16l-.8 1.38a.75.75 0 11-1.3-.76l.8-1.38a.75.75 0 01.92-.24zM10 15.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zM4.06 14.56a.75.75 0 011.16-.38l1.38.8a.75.75 0 11-.76 1.3l-1.38-.8a.75.75 0 01-.38-1.16zm11.88 0a.75.75 0 01-.38 1.16l-1.38.8a.75.75 0 11-.76-1.3l1.38-.8a.75.75 0 011.16.38zM2.75 10a.75.75 0 010-1.5h1.5a.75.75 0 010 1.5h-1.5zm13 0a.75.75 0 010-1.5h1.5a.75.75 0 010 1.5h-1.5zM10 6.5a3.5 3.5 0 100 7 3.5 3.5 0 000-7z" clip-rule="evenodd" /></svg>'},km={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'},Fm={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>'},Vm={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" /></svg>'},Gm={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg>'},qm={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>'},Hm={template:'<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-cyan-400"></div>'},Bm={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-1.007 1.11-1.226.554-.22 1.156-.22 1.71 0 .554.22 1.02.684 1.11 1.226M10.01 19.344c.09-.542.56-1.007 1.11-1.226.554-.22 1.156-.22 1.71 0 .554.22 1.02.684 1.11 1.226M10.01 4.482c.09-.542.56-1.007 1.11-1.226.554-.22 1.156-.22 1.71 0 .554.22 1.02.684 1.11 1.226M12 21a9 9 0 100-18 9 9 0 000 18z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 15a3 3 0 100-6 3 3 0 000 6z" /></svg>'},Jm={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>'},$m={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.967-.63 1.563-.63h2.25z" /></svg>'},Om={template:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>'},Km={components:{SparklesIcon:Lm,ClockIcon:km,DownloadIcon:Fm,UploadIcon:Vm,ChevronLeftIcon:Gm,ChevronRightIcon:qm,Spinner:Hm,SettingsIcon:Bm,CloseIcon:Jm,KeyIcon:$m,SheetIcon:Om},setup(){const t=fe(null),e=fe([]),n=fe(0),o=fe(!0),i=fe([]),s=fe(!1),a=fe(null),u=fe(!1),f=fe(!1),d=fe(null);let c=null;const p=fe(!1),h=fe(!1),y=fe(null),_=tn({id:"1eYW1NrfVQw-rWdxRdgC_rqMvFwgKdWPuE3hMWTODtt0",name:"Sheet5",range:"D2:AD999"}),v=tn({id:"",name:"",startCell:"",endCell:""}),N=fe(!1),P=fe(null),M=fe(""),R=fe(!1),I=fe(""),U=fe(""),q=fe(!1),F=fe(""),te=K=>{try{const ne=K.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),ue=decodeURIComponent(atob(ne).split("").map(function(_e){return"%"+("00"+_e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(ue)}catch($){return console.error("Error decoding JWT",$),null}},V=K=>{const $=te(K.credential);$&&(y.value=$,localStorage.setItem("user-profile",JSON.stringify($)))},J=()=>{var K,$;y.value=null,localStorage.removeItem("user-profile"),($=(K=window.google)==null?void 0:K.accounts)!=null&&$.id&&window.google.accounts.id.disableAutoSelect(),p.value=!1},ae=(K,$,ne)=>{const ue=document.createElement("a");ue.href=K,ue.download=`img${$}-${ne}.png`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},z=async(K,$)=>{if(!M.value){a.value="Gemini API Key is not set. Please set it in the settings sidebar.",s.value=!1,u.value&&(u.value=!1);return}s.value=!0,a.value=null;try{const{text:ne,row:ue,col:_e}=K,he=await Um(ne,M.value,$),m=await(await fetch(he)).blob(),g=new File([m],`img${ue}-${_e}.png`,{type:m.type||"image/png"});t.value={file:g,url:he},i.value.unshift({prompt:ne,url:he,row:ue,col:_e}),f.value&&ae(he,ue,_e)}catch(ne){a.value=`Generation failed: ${ne.message}`,u.value&&(u.value=!1)}finally{s.value=!1}},pe=K=>{var ne;const $=(ne=K.target.files)==null?void 0:ne[0];if($){const ue=URL.createObjectURL($);t.value={file:$,url:ue},i.value=[],a.value=null}},et=()=>{var K;e.value.length>0&&z(e.value[n.value],(K=t.value)==null?void 0:K.file)},ut=()=>{n.value=Math.max(0,n.value-1)},oe=()=>{n.value=Math.min(e.value.length-1,n.value+1)},j=()=>{if(u.value)u.value=!1;else{if(!t.value){alert("Please generate at least one image manually before starting Auto-Generate mode.");return}u.value=!0}},X=async()=>{if(!U.value){a.value="Google Sheets API Key is not set. Please set it in the settings sidebar.",o.value=!1;return}o.value=!0,a.value=null,e.value=[],n.value=0;try{const K=`https://sheets.googleapis.com/v4/spreadsheets/${_.id}/values/${encodeURIComponent(_.name)}!${_.range}?key=${U.value}`,$=await fetch(K);if(!$.ok)throw new Error(`HTTP error! Status: ${$.status}. Check Sheet ID, Name, Range, and API Key.`);const ne=await $.json();if(ne.values&&ne.values.length>0){const ue=g=>{let T=0;g=g.toUpperCase();for(let C=0;C<g.length;C++)T=T*26+(g.charCodeAt(C)-65+1);return T},_e=g=>{var S,D;const T=g.split(":")[0],C=((S=T.match(/[A-Z]+/))==null?void 0:S[0])||"A",E=parseInt(((D=T.match(/\d+/))==null?void 0:D[0])||"1",10);return{startCol:ue(C),startRow:E}},{startCol:he,startRow:kt}=_e(_.range),m=ne.values.flatMap((g,T)=>g.map((C,E)=>({text:C,row:kt+T,col:he+E})).filter(C=>typeof C.text=="string"&&C.text.trim()!==""));if(m.length===0)throw new Error("No valid prompts found in the specified range.");e.value=m}else throw new Error("Sheet is empty or contains no data in the specified range.")}catch(K){const $=`Failed to load prompts: ${K.message}`;throw a.value=$,console.error(K),K}finally{o.value=!1}},Oe=()=>{v.id=_.id,v.name=_.name;const[K,$]=_.range.split(":");v.startCell=K||"",v.endCell=$||"",P.value=null,h.value=!0,p.value=!1},Ct=async K=>{K.preventDefault(),P.value=null,N.value=!0;const{id:$,name:ne,startCell:ue,endCell:_e}=v;if(!$.trim()||!ne.trim()||!ue.trim()||!_e.trim()){P.value="All fields are required.",N.value=!1;return}const he={..._};_.id=v.id.trim(),_.name=v.name.trim(),_.range=`${v.startCell.trim()}:${v.endCell.trim()}`;try{await X(),localStorage.setItem("sheet-id",_.id),localStorage.setItem("sheet-name",_.name),localStorage.setItem("sheet-range",_.range),h.value=!1}catch(kt){_.id=he.id,_.name=he.name,_.range=he.range,P.value=`Failed to fetch from sheet. ${kt.message}. Please check your inputs are correct and the sheet is public.`}finally{N.value=!1}},Ke=()=>{F.value=U.value,q.value=!0,p.value=!1},we=K=>{K.preventDefault(),F.value.trim()&&(U.value=F.value,localStorage.setItem("sheet-api-key",F.value)),q.value=!1},fn=()=>{I.value=M.value,R.value=!0,p.value=!1},qn=K=>{K.preventDefault(),I.value.trim()&&(M.value=I.value,localStorage.setItem("gemini-api-key",I.value)),R.value=!1};return _r(async()=>{var ue,_e;const K=localStorage.getItem("user-profile");K&&(y.value=JSON.parse(K)),(_e=(ue=window.google)==null?void 0:ue.accounts)!=null&&_e.id&&(window.google.accounts.id.initialize({client_id:"YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com",callback:V}),window.google.accounts.id.renderButton(document.getElementById("googleSignInButton"),{theme:"outline",size:"large",type:"standard",text:"signin_with"}));const $=localStorage.getItem("gemini-api-key");$&&(M.value=$);const ne=localStorage.getItem("sheet-api-key");ne&&(U.value=ne),_.id=localStorage.getItem("sheet-id")||_.id,_.name=localStorage.getItem("sheet-name")||_.name,_.range=localStorage.getItem("sheet-range")||_.range;try{await X()}catch{}}),Rt(u,K=>{K&&e.value.length>0?c=window.setInterval(()=>{var ne;if(s.value)return;const $=(n.value+1)%e.value.length;z(e.value[$],(ne=t.value)==null?void 0:ne.file),n.value=$},1e4):c&&clearInterval(c)}),Rt(U,()=>{X().catch(()=>{})}),Rt(_,()=>{X().catch(()=>{})}),{baseImage:t,sheetPrompts:e,currentPromptIndex:n,isFetchingSheet:o,generatedImages:i,isLoading:s,error:a,isAutoMode:u,fileInputRef:d,isAutoDownload:f,isSidebarOpen:p,isSheetModalOpen:h,userProfile:y,tempSheetConfig:v,isSubmittingSheet:N,sheetModalError:P,isSheetKeyModalOpen:q,tempSheetApiKey:F,isGeminiKeyModalOpen:R,tempGeminiApiKey:I,handleDownload:ae,performGeneration:z,handleFileChange:pe,handleGenerateClick:et,handlePrevPrompt:ut,handleNextPrompt:oe,toggleAutoMode:j,handleLogout:J,openSheetModal:Oe,handleSheetConfigSubmit:Ct,openSheetKeyModal:Ke,handleSheetKeySubmit:we,openGeminiKeyModal:fn,handleGeminiKeySubmit:qn}},template:`
    <div class="min-h-screen bg-gray-900 text-gray-100 font-sans">
      <nav class="bg-gray-800/80 backdrop-blur-sm sticky top-0 z-20 shadow-lg">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
          <h1 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-teal-500">
            Gemini Image Editor
          </h1>
          <button @click="isSidebarOpen = true" class="p-2 rounded-full hover:bg-gray-700 transition-colors" aria-label="Open settings">
            <settings-icon />
          </button>
        </div>
      </nav>

      <main class="container mx-auto px-4 py-8">
        <header class="text-center mb-10">
          <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-teal-500">
            Welcome to the Editor
          </h1>
          <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">
            Upload your image or generate one, then choose an editing instruction to evolve it with each step.
          </p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- Controls Section -->
          <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col space-y-6 h-fit">
            <h2 class="text-2xl font-semibold border-b border-gray-700 pb-3">1. Upload Image</h2>
            <div class="flex flex-col">
              <input
                  type="file"
                  ref="fileInputRef"
                  @change="handleFileChange"
                  accept="image/*"
                  class="hidden"
                  id="imageUpload"
              />
              <label
                  for="imageUpload"
                  class="flex items-center justify-center p-4 text-lg font-bold bg-gray-700 hover:bg-gray-600 rounded-lg transition-all duration-300 cursor-pointer"
              >
                  <upload-icon class="w-6 h-6 mr-2" />
                  Choose an image to edit...
              </label>
              <p class="text-sm text-gray-500 mt-2 text-center">Or, start with a text prompt to generate the first image.</p>
            </div>

            <h2 class="text-2xl font-semibold border-b border-gray-700 pb-3">2. Choose Prompt</h2>
            <div v-if="isFetchingSheet" class="flex items-center space-x-2 text-gray-400">
                <spinner />
                <span>Loading creative prompts...</span>
            </div>
            <div v-else class="flex items-center justify-between space-x-2">
              <button
                @click="handlePrevPrompt"
                :disabled="currentPromptIndex === 0 || isLoading || isAutoMode"
                class="p-3 bg-gray-700 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                aria-label="Previous prompt"
              >
                <chevron-left-icon class="w-5 h-5" />
              </button>
              <p class="flex-grow text-center text-sm bg-gray-900/50 border border-gray-600 rounded-lg p-3 h-full min-h-[50px] flex items-center justify-center">
                {{ sheetPrompts.length > 0 ? sheetPrompts[currentPromptIndex].text : 'No prompts loaded.' }}
              </p>
              <button
                @click="handleNextPrompt"
                :disabled="currentPromptIndex >= sheetPrompts.length - 1 || isLoading || isAutoMode"
                class="p-3 bg-gray-700 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                aria-label="Next prompt"
              >
                <chevron-right-icon class="w-5 h-5" />
              </button>
            </div>
            
            <h2 class="text-2xl font-semibold border-b border-gray-700 pb-3">3. Generate Image</h2>
            <div class="flex flex-col sm:flex-row gap-4">
              <button
                @click="handleGenerateClick"
                :disabled="isLoading || isFetchingSheet || isAutoMode"
                class="flex-1 flex items-center justify-center p-4 text-lg font-bold bg-cyan-500 hover:bg-cyan-600 rounded-lg transition-all duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105 disabled:transform-none"
              >
                <spinner v-if="isLoading && !isAutoMode" />
                <sparkles-icon v-else class="w-6 h-6 mr-2" />
                Generate
              </button>
               <button
                @click="toggleAutoMode"
                :disabled="isLoading || isFetchingSheet || (!isAutoMode && !baseImage)"
                :class="['flex-1 flex items-center justify-center p-4 text-lg font-bold rounded-lg transition-all duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105 disabled:transform-none', isAutoMode ? 'bg-red-500 hover:bg-red-600' : 'bg-teal-500 hover:bg-teal-600']"
              >
                <spinner v-if="isLoading && isAutoMode"/>
                <clock-icon v-else class="w-6 h-6 mr-2"/>
                {{ isAutoMode ? 'Stop Auto' : 'Auto-Generate' }}
              </button>
            </div>
            <div class="flex items-center justify-center pt-2 space-x-3">
              <span class="text-sm font-medium text-gray-400">Auto Download File</span>
              <label for="autoDownloadToggle" class="flex items-center cursor-pointer">
                  <div class="relative">
                      <input type="checkbox" id="autoDownloadToggle" class="sr-only" v-model="isAutoDownload">
                      <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                      <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"></div>
                  </div>
              </label>
            </div>
          </div>
          
          <!-- Results Section -->
          <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col">
            <h2 class="text-2xl font-semibold border-b border-gray-700 pb-3 mb-6">Image Canvas</h2>
            <div v-if="error" class="bg-red-900 border border-red-700 text-red-200 p-3 rounded-lg mb-4">{{ error }}</div>

            <div class="mb-6 rounded-lg overflow-hidden border-2 border-gray-700">
              <img v-if="baseImage" :src="baseImage.url" alt="Current base for editing" class="w-full h-auto object-contain max-h-[40vh]" />
              <div v-else class="flex items-center justify-center h-64 bg-gray-900/50 text-center text-gray-500">
                <div>
                  <p>Upload an image or generate one to start.</p>
                  <p class="text-sm mt-1">Your current image will appear here.</p>
                </div>
              </div>
            </div>

            <h3 class="text-xl font-semibold border-b border-gray-700 pb-2 mb-4">Generation History</h3>
            <div v-if="generatedImages.length === 0" class="text-center text-gray-500 py-8 flex-grow flex items-center justify-center">
                <p>Your generated images will appear here.</p>
            </div>
            <div v-else class="grid grid-cols-2 sm:grid-cols-3 gap-4 overflow-y-auto flex-grow pr-2">
              <div v-for="(image, index) in generatedImages" :key="index" class="relative group rounded-lg overflow-hidden aspect-square">
                <img :src="image.url" :alt="'Generated with prompt: ' + image.prompt" class="w-full h-full object-cover" />
                <div class="absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  <p class="text-center text-sm text-white">{{ image.prompt }}</p>
                </div>
                 <div class="absolute top-2 right-2 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    <button 
                        @click="handleDownload(image.url, image.row, image.col)"
                        class="bg-black bg-opacity-50 text-white rounded-full p-2 hover:bg-cyan-500 transition-all duration-300"
                        aria-label="Download image"
                        title="Download image"
                    >
                        <download-icon class="w-5 h-5"/>
                    </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Sidebar -->
      <div v-if="isSidebarOpen" @click="isSidebarOpen = false" class="fixed inset-0 z-30 bg-black/60 transition-all duration-300">
        <aside @click.stop :class="['fixed top-0 right-0 h-full w-full max-w-sm bg-gray-800 shadow-2xl transition-transform duration-300 transform', isSidebarOpen ? 'translate-x-0' : 'translate-x-full']">
          <div class="p-4 flex items-center justify-between border-b border-gray-700">
            <h2 class="text-2xl font-semibold">Settings</h2>
            <button @click="isSidebarOpen = false" class="p-2 rounded-full hover:bg-gray-700 transition-colors" aria-label="Close settings">
              <close-icon />
            </button>
          </div>
          <div class="p-6 flex flex-col gap-y-6">
            <!-- User Profile Section -->
            <div class="bg-gray-700/50 p-4 rounded-xl">
              <h3 class="text-lg font-medium text-center mb-4">User Profile</h3>
              <div class="flex flex-col items-center space-y-4">
                <template v-if="userProfile">
                    <img :src="userProfile.picture" alt="User profile" class="w-20 h-20 rounded-full"/>
                    <div class="text-center">
                        <p class="font-semibold">{{ userProfile.name }}</p>
                        <p class="text-sm text-gray-400">{{ userProfile.email }}</p>
                    </div>
                    <button @click="handleLogout" class="w-full p-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors">
                        Sign Out
                    </button>
                </template>
                <template v-else>
                    <p class="text-gray-400">Sign in to sync your settings.</p>
                    <div id="googleSignInButton"></div>
                </template>
              </div>
            </div>

            <!-- Prompts Source Section -->
            <div class="bg-gray-700/50 p-4 rounded-xl">
                <h3 class="text-lg font-medium text-center mb-4">Prompts Source</h3>
                <button @click="openSheetModal" class="w-full flex items-center justify-center p-3 bg-teal-600 hover:bg-teal-700 rounded-lg font-semibold transition-colors">
                    <sheet-icon class="w-5 h-5 mr-2"/>
                    Change Sheet Source
                </button>
            </div>

            <!-- API Keys Section -->
            <div class="bg-gray-700/50 p-4 rounded-xl">
                <h3 class="text-lg font-medium text-center mb-4">API Keys</h3>
                <div class="space-y-4">
                    <button 
                        @click="openGeminiKeyModal"
                        class="w-full flex items-center justify-center p-3 bg-teal-600 hover:bg-teal-700 rounded-lg font-semibold transition-colors"
                    >
                        <key-icon class="w-5 h-5 mr-2"/>
                        Set Gemini API Key
                    </button>
                    <button 
                        @click="openSheetKeyModal"
                        class="w-full flex items-center justify-center p-3 bg-teal-600 hover:bg-teal-700 rounded-lg font-semibold transition-colors"
                    >
                        <key-icon class="w-5 h-5 mr-2"/>
                        Set Sheet API Key
                    </button>
                </div>
            </div>
          </div>
        </aside>
      </div>

       <!-- Sheet Config Modal -->
      <div v-if="isSheetModalOpen" class="fixed inset-0 z-40 bg-black/70 flex items-center justify-center p-4">
          <div class="bg-gray-800 rounded-xl shadow-2xl p-6 w-full max-w-lg relative">
              <button @click="isSheetModalOpen = false" class="absolute top-4 right-4 p-2 rounded-full hover:bg-gray-700 transition-colors" aria-label="Close sheet settings">
                  <close-icon />
              </button>
              <h2 class="text-2xl font-bold mb-4 text-center">Set Google Sheet Source</h2>
              <p class="text-gray-400 mb-6 text-center">
                  Provide the ID, Sheet Name, and Cell Range for your public Google Sheet.
              </p>
              <div v-if="sheetModalError" class="bg-red-900 border border-red-700 text-red-200 p-3 rounded-lg mb-4 text-sm">{{ sheetModalError }}</div>
              <form @submit.prevent="handleSheetConfigSubmit" class="flex flex-col space-y-4">
                  <div>
                      <label for="sheetId" class="block text-sm font-medium text-gray-300 mb-1">Spreadsheet ID</label>
                      <input id="sheetId" type="text" v-model="tempSheetConfig.id" placeholder="e.g., 1eYW1NrfVQw-rWdxRdgC_rqMvFwgKdWPuE3hMWTODtt0" class="w-full p-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:outline-none" aria-label="Spreadsheet ID" required />
                  </div>
                    <div>
                      <label for="sheetName" class="block text-sm font-medium text-gray-300 mb-1">Sheet Name</label>
                      <input id="sheetName" type="text" v-model="tempSheetConfig.name" placeholder="e.g., Sheet1" class="w-full p-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:outline-none" aria-label="Sheet Name" required />
                  </div>
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                      <div>
                          <label for="sheetStartCell" class="block text-sm font-medium text-gray-300 mb-1">From Cell</label>
                          <input id="sheetStartCell" type="text" v-model="tempSheetConfig.startCell" placeholder="e.g., D2" class="w-full p-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:outline-none" aria-label="Start Cell" required />
                      </div>
                      <div>
                          <label for="sheetEndCell" class="block text-sm font-medium text-gray-300 mb-1">To Cell</label>
                          <input id="sheetEndCell" type="text" v-model="tempSheetConfig.endCell" placeholder="e.g., AD999" class="w-full p-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:outline-none" aria-label="End Cell" required />
                      </div>
                  </div>
                  <button type="submit" class="p-3 bg-cyan-500 hover:bg-cyan-600 rounded-lg font-bold text-lg transition-colors disabled:bg-gray-600 flex items-center justify-center" :disabled="isSubmittingSheet || !tempSheetConfig.id.trim() || !tempSheetConfig.name.trim() || !tempSheetConfig.startCell.trim() || !tempSheetConfig.endCell.trim()">
                      <spinner v-if="isSubmittingSheet" class="mr-2" />
                      {{ isSubmittingSheet ? 'Verifying...' : 'Save & Fetch Prompts' }}
                  </button>
              </form>
          </div>
      </div>

      <!-- Sheet API Key Modal -->
      <div v-if="isSheetKeyModalOpen" class="fixed inset-0 z-40 bg-black/70 flex items-center justify-center p-4">
          <div class="bg-gray-800 rounded-xl shadow-2xl p-6 w-full max-w-md relative">
              <button @click="isSheetKeyModalOpen = false" class="absolute top-4 right-4 p-2 rounded-full hover:bg-gray-700 transition-colors" aria-label="Close API key settings">
                  <close-icon />
              </button>
              <h2 class="text-2xl font-bold mb-4 text-center">Set Google Sheets API Key</h2>
              <p class="text-gray-400 mb-6 text-center">
                  Enter your Google Sheets API key to fetch prompts. This key is stored locally in your browser.
              </p>
              <form @submit.prevent="handleSheetKeySubmit" class="flex flex-col space-y-4">
                  <div>
                      <label for="sheetApiKeyInput" class="block text-sm font-medium text-gray-300 mb-1">API Key</label>
                      <input 
                          id="sheetApiKeyInput"
                          type="password"
                          v-model="tempSheetApiKey"
                          placeholder="Enter your API key"
                          class="w-full p-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:outline-none"
                          aria-label="Google Sheets API Key"
                          required
                      />
                  </div>
                  <button type="submit" class="p-3 bg-cyan-500 hover:bg-cyan-600 rounded-lg font-bold text-lg transition-colors disabled:bg-gray-600" :disabled="!tempSheetApiKey.trim()">
                      Save Key
                  </button>
              </form>
          </div>
      </div>
      
      <!-- Gemini API Key Modal -->
      <div v-if="isGeminiKeyModalOpen" class="fixed inset-0 z-40 bg-black/70 flex items-center justify-center p-4">
          <div class="bg-gray-800 rounded-xl shadow-2xl p-6 w-full max-w-md relative">
              <button @click="isGeminiKeyModalOpen = false" class="absolute top-4 right-4 p-2 rounded-full hover:bg-gray-700 transition-colors" aria-label="Close API key settings">
                  <close-icon />
              </button>
              <h2 class="text-2xl font-bold mb-4 text-center">Set Gemini API Key</h2>
              <p class="text-gray-400 mb-6 text-center">
                  Enter your Gemini API key. This key is stored locally in your browser.
              </p>
              <form @submit.prevent="handleGeminiKeySubmit" class="flex flex-col space-y-4">
                  <div>
                      <label for="geminiApiKeyInput" class="block text-sm font-medium text-gray-300 mb-1">API Key</label>
                      <input 
                          id="geminiApiKeyInput"
                          type="password"
                          v-model="tempGeminiApiKey"
                          placeholder="Enter your API key"
                          class="w-full p-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:outline-none"
                          aria-label="Gemini API Key"
                          required
                      />
                  </div>
                  <button type="submit" class="p-3 bg-cyan-500 hover:bg-cyan-600 rounded-lg font-bold text-lg transition-colors disabled:bg-gray-600" :disabled="!tempGeminiApiKey.trim()">
                      Save Key
                  </button>
              </form>
          </div>
      </div>
    </div>
  `};Ju(Km).mount("#app");
